{"version":3,"sources":["webpack:///calc.js","webpack:///webpack/bootstrap b86100b6863a9617853e","webpack:///./src/index.js","webpack:///./src/myQuery.js","webpack:///./src/myModel/observer/dep.js","webpack:///./src/helper.js","webpack:///./src/myModel/index.js","webpack:///./src/myModel/observer/index.js","webpack:///./src/myModel/observer/watcher.js","webpack:///./src/normalize/expression.js","webpack:///./src/normalize/style.js","webpack:///./src/parser.js","webpack:///./src/types.js","webpack:///./src/util.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","_myQuery","_myQuery2","_index","_index2","_types","_types2","_parser","_parser2","_style","_style2","_expression","_expression2","_helper","model","data","output","input","isEqualed","on","e","addChar","target","dataset","$watch","newValue","oldValue","text","trim","normalizedExpression","getter","showResult","_classCallCheck","instance","Constructor","TypeError","EventName","callback","addEventListener","this","toLowerCase","Object","defineProperty","value","_createClass","defineProperties","props","i","length","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","cache","DOMSelector","HzyElement","document","bind","el","querySelector","className","classList","add","remove","replace","RegExp","split","join","newText","textContent","pushTarget","_target","Dep","targetStack","push","popTarget","pop","uid","subs","sub","addDep","slice","forEach","update","directive","console","warn","valueGetter","result","proxy","get","_data","set","val","_watcher","_watcher2","Model","_this","options","arguments","undefined","_watchers","keys","observe","expOrFn","watcher","_typeof","ob","hasOwnProperty","Observer","isExtensible","defineReactive","dep","_dep2","depend","newVal","notify","Symbol","iterator","constructor","_dep","walk","getGetter","Function","Watcher","newDepIds","Set","newDeps","_getter","has","addSub","run","normalizeBrace","expression","leftNum","match","rightNum","differs","normalizeFactory","reg","placer","regArray","exec","normalizeExpression","normalizePower","normalizeSqrt","normalizeFactorial","reduce","wrapper","MyRegExp","power","sqrt","factorial","normalizeStyle","normalizeInput","normalizeClass","normalizeOutput","removeClass","outputArray","_toConsumableArray","arr","Array","isArray","arr2","from","_util","Operation","math","Math","sin","cos","tan","log10","log","E","PI","pow","factor","string","apply","concat","minusInput","stringAdded","test","onEqual","addClass","onDelete","mathRegExp","trigonometricFunction","logFunction","operation","number","root","pi","left","right","1","2","3","4","5","6","7","8","9","0","plus","minus","multiply","divide","point","ln","lg","eq","backspace","ce","num","Error"],"mappings":"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","file":"calc.js","sourcesContent":["/*!\n * simple-calculator 0.0.0 - Modern Web Programming HomeWork - SYSU\n * Copyright (c) 2016 He Zhiyu - https://github.com/HeskeyBaozi/web-homework-sysu#readme\n * License: MIT\n */\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _myQuery = __webpack_require__(1);\n\t\n\tvar _myQuery2 = _interopRequireDefault(_myQuery);\n\t\n\tvar _index = __webpack_require__(4);\n\t\n\tvar _index2 = _interopRequireDefault(_index);\n\t\n\tvar _types = __webpack_require__(10);\n\t\n\tvar _types2 = _interopRequireDefault(_types);\n\t\n\tvar _parser = __webpack_require__(9);\n\t\n\tvar _parser2 = _interopRequireDefault(_parser);\n\t\n\tvar _style = __webpack_require__(8);\n\t\n\tvar _style2 = _interopRequireDefault(_style);\n\t\n\tvar _expression = __webpack_require__(7);\n\t\n\tvar _expression2 = _interopRequireDefault(_expression);\n\t\n\tvar _helper = __webpack_require__(3);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\r\n\t * Create a model of the screen in the calculator\r\n\t * @type {Model}\r\n\t */\n\tvar model = new _index2.default({\n\t    data: {\n\t        output: '',\n\t        input: '0',\n\t        isEqualed: false\n\t    }\n\t});\n\t\n\t/**\r\n\t * Add and Bind Events\r\n\t */\n\t(0, _myQuery2.default)('#panel').on('click', function (e) {\n\t    if (model.input === '0') model.input = ''; // normalize zero\n\t    if (model.isEqualed) {\n\t        (0, _style2.default)(model);\n\t        model.isEqualed = false;\n\t    }\n\t    (0, _helper.addChar)(model, _types2.default[e.target.dataset['directive']]);\n\t});\n\t\n\t/**\r\n\t * Bind the data with the View!!!\r\n\t * Observe the Model, Update the View when the model's data change!\r\n\t */\n\tmodel.$watch('output', function (newValue, oldValue) {\n\t    if (newValue !== oldValue) {\n\t        (0, _myQuery2.default)('#output').text(newValue.trim());\n\t    }\n\t});\n\t\n\tmodel.$watch('input', function (newValue, oldValue) {\n\t    if (newValue !== oldValue) {\n\t        (0, _myQuery2.default)('#input').text(newValue);\n\t        var normalizedExpression = (0, _expression2.default)(newValue);\n\t        var getter = (0, _parser2.default)(normalizedExpression);\n\t        (0, _helper.showResult)(model, normalizedExpression, getter);\n\t    }\n\t});\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar cache = {};\n\t\n\t/**\r\n\t * a tiny small Query just like jQuery 2333\r\n\t * @param DOMSelector {string|document}\r\n\t * @return {*}\r\n\t */\n\t\n\texports.default = function (DOMSelector) {\n\t    if (typeof DOMSelector === 'string') {\n\t        if (cache[DOMSelector]) {\n\t            return cache[DOMSelector];\n\t        } else {\n\t            return cache[DOMSelector] = new HzyElement(DOMSelector);\n\t        }\n\t    } else if (DOMSelector === document) {\n\t        document.on = _on.bind(document);\n\t        return document;\n\t    }\n\t};\n\t\n\tvar HzyElement = function () {\n\t    function HzyElement(DOMSelector) {\n\t        _classCallCheck(this, HzyElement);\n\t\n\t        this.el = document.querySelector(DOMSelector);\n\t    }\n\t\n\t    /**\r\n\t     * Event binding\r\n\t     * @param EventName {string}\r\n\t     * @param callback {function}\r\n\t     * @return {HzyElement}\r\n\t     */\n\t\n\t\n\t    _createClass(HzyElement, [{\n\t        key: 'on',\n\t        value: function on(EventName, callback) {\n\t            _on.call(this.el, EventName, callback);\n\t            return this;\n\t        }\n\t\n\t        /**\r\n\t         * add a class to the DOM\r\n\t         * @param className {string}\r\n\t         * @return {HzyElement}\r\n\t         */\n\t\n\t    }, {\n\t        key: 'addClass',\n\t        value: function addClass(className) {\n\t            if (this.el.classList) this.el.classList.add(className);else this.el.className += ' ' + className;\n\t            return this;\n\t        }\n\t\n\t        /**\r\n\t         * remove a class\r\n\t         * @param className {string}\r\n\t         * @return {HzyElement}\r\n\t         */\n\t\n\t    }, {\n\t        key: 'removeClass',\n\t        value: function removeClass(className) {\n\t            if (this.el.classList) this.el.classList.remove(className);else this.el.className = this.el.className.replace(new RegExp('(^|\\\\b)' + className.split(' ').join('|') + '(\\\\b|$)', 'gi'), ' ');\n\t            return this;\n\t        }\n\t\n\t        /**\r\n\t         * get/set text\r\n\t         * @param newText\r\n\t         * @return {*}\r\n\t         */\n\t\n\t    }, {\n\t        key: 'text',\n\t        value: function text(newText) {\n\t            if (typeof newText === 'undefined') {\n\t                return this.el.textContent;\n\t            }\n\t            this.el.textContent = newText;\n\t            return this;\n\t        }\n\t    }]);\n\t\n\t    return HzyElement;\n\t}();\n\t\n\t/**\r\n\t * add events\r\n\t * @param EventName {string}\r\n\t * @param callback {function}\r\n\t * @return {object} the context of the function: this.\r\n\t */\n\t\n\t\n\tfunction _on(EventName, callback) {\n\t    if (addEventListener) {\n\t        this.addEventListener(EventName.toLowerCase(), callback);\n\t    } else {\n\t        this['on' + EventName.toLowerCase()] = callback;\n\t    }\n\t    return this;\n\t}\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\texports.pushTarget = pushTarget;\n\texports.popTarget = popTarget;\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar uid = 0;\n\t\n\t/**\r\n\t * 订阅者模式\r\n\t */\n\t\n\tvar Dep = function () {\n\t    function Dep() {\n\t        _classCallCheck(this, Dep);\n\t\n\t        this.id = uid++;\n\t        this.subs = [];\n\t    }\n\t\n\t    _createClass(Dep, [{\n\t        key: 'addSub',\n\t        value: function addSub(sub) {\n\t            this.subs.push(sub);\n\t        }\n\t\n\t        /**\r\n\t         * 通知依赖\r\n\t         */\n\t\n\t    }, {\n\t        key: 'depend',\n\t        value: function depend() {\n\t            if (Dep.target) {\n\t                Dep.target.addDep(this);\n\t            }\n\t        }\n\t\n\t        /**\r\n\t         * 广播更新\r\n\t         */\n\t\n\t    }, {\n\t        key: 'notify',\n\t        value: function notify() {\n\t            var subs = this.subs.slice();\n\t            subs.forEach(function (sub) {\n\t                sub.update();\n\t            });\n\t        }\n\t    }]);\n\t\n\t    return Dep;\n\t}();\n\t\n\texports.default = Dep;\n\t\n\t\n\tDep.target = null;\n\t\n\tvar targetStack = [];\n\t\n\tfunction pushTarget(_target) {\n\t    if (Dep.target) targetStack.push(Dep.target);\n\t    Dep.target = _target;\n\t}\n\t\n\tfunction popTarget() {\n\t    Dep.target = targetStack.pop();\n\t}\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.addChar = addChar;\n\texports.showResult = showResult;\n\t\n\tvar _myQuery = __webpack_require__(1);\n\t\n\tvar _myQuery2 = _interopRequireDefault(_myQuery);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\r\n\t * add a char to the calculator screen!\r\n\t * @param model {model}\r\n\t * @param directive {string|function}\r\n\t */\n\tfunction addChar(model, directive) {\n\t    if (typeof directive === 'string') {\n\t        model.input += directive;\n\t    } else if (typeof directive === 'function') {\n\t        directive.call(model);\n\t    } else {\n\t        console.warn('cannot parse this directive:', directive);\n\t    }\n\t}\n\t\n\t/**\r\n\t * EveryTime show the result of the expression on the screen!\r\n\t * @param model {model}\r\n\t * @param normalizedExpression {string}\r\n\t * @param valueGetter {function} return the value of the expression!\r\n\t */\n\tfunction showResult(model, normalizedExpression, valueGetter) {\n\t    var result = null;\n\t    try {\n\t        model.result = result = valueGetter();\n\t        if (typeof result === 'function') {\n\t            (0, _myQuery2.default)('#input-quick').text('Please enter number');\n\t        } else if (result) {\n\t            (0, _myQuery2.default)('#input-quick').text(normalizedExpression + ' = ' + result);\n\t        } else {\n\t            (0, _myQuery2.default)('#input-quick').text('');\n\t        }\n\t    } catch (e) {\n\t        model.result = 'Syntax Error :(';\n\t        (0, _myQuery2.default)('#input-quick').text(model.result);\n\t    }\n\t}\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _index = __webpack_require__(5);\n\t\n\tvar _watcher = __webpack_require__(6);\n\t\n\tvar _watcher2 = _interopRequireDefault(_watcher);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t/**\r\n\t * Just like the part of the model in MVVM!\r\n\t */\n\tvar Model = function () {\n\t    function Model() {\n\t        var _this = this;\n\t\n\t        var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\t\n\t        _classCallCheck(this, Model);\n\t\n\t        this._data = options.data;\n\t        this._watchers = [];\n\t        Object.keys(this._data).forEach(function (key) {\n\t            proxy(_this, key);\n\t        });\n\t        (0, _index.observe)(this._data);\n\t    }\n\t\n\t    /**\r\n\t     * when the vale of the expression changes,\r\n\t     * the callback would be called\r\n\t     * callback example:\r\n\t     *        (newValue, oldValue) => *, this <===> model\r\n\t     * @param expOrFn {string|function}\r\n\t     * @param callback {function}\r\n\t     */\n\t\n\t\n\t    _createClass(Model, [{\n\t        key: '$watch',\n\t        value: function $watch(expOrFn, callback) {\n\t            var watcher = new _watcher2.default(this, expOrFn, callback);\n\t            this._watchers.push(watcher);\n\t        }\n\t    }]);\n\t\n\t    return Model;\n\t}();\n\t\n\t/**\r\n\t * proxy the properties\r\n\t * example:\r\n\t *      model.key <===> model._data.key\r\n\t * @param model {Model}\r\n\t * @param key {String}\r\n\t */\n\t\n\t\n\texports.default = Model;\n\tfunction proxy(model, key) {\n\t    Object.defineProperty(model, key, {\n\t        configurable: true,\n\t        enumerable: true,\n\t        get: function get() {\n\t            return model._data[key];\n\t        },\n\t        set: function set(val) {\n\t            model._data[key] = val;\n\t        }\n\t    });\n\t}\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\texports.observe = observe;\n\t\n\tvar _dep = __webpack_require__(2);\n\t\n\tvar _dep2 = _interopRequireDefault(_dep);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tvar Observer = function () {\n\t    function Observer(value) {\n\t        _classCallCheck(this, Observer);\n\t\n\t        this.value = value;\n\t        Object.defineProperty(value, '__ob__', {\n\t            value: this,\n\t            enumerable: false,\n\t            writable: true,\n\t            configurable: true\n\t        });\n\t        this.walk(value);\n\t    }\n\t\n\t    /**\r\n\t     * travel all the props of the object, and set reactive props.\r\n\t     * @param obj {object}\r\n\t     */\n\t\n\t\n\t    _createClass(Observer, [{\n\t        key: 'walk',\n\t        value: function walk(obj) {\n\t            Object.keys(obj).forEach(function (key) {\n\t                defineReactive(obj, key, obj[key]);\n\t            });\n\t        }\n\t    }]);\n\t\n\t    return Observer;\n\t}();\n\t\n\t/**\r\n\t * observe a property and set a observer if the property doesn't own one;\r\n\t * @param value {object} the property that needs to be observed\r\n\t * @return {Observer|undefined} if it is a string or number, returns undefined\r\n\t */\n\t\n\t\n\tfunction observe(value) {\n\t    if (!value || (typeof value === 'undefined' ? 'undefined' : _typeof(value)) !== 'object') {\n\t        return;\n\t    }\n\t    var ob = void 0;\n\t    if (value.hasOwnProperty('__ob__') && value['__ob__'] instanceof Observer) {\n\t        ob = value['__ob__'];\n\t    } else if (Object.isExtensible(value)) {\n\t        ob = new Observer(value);\n\t    }\n\t    return ob;\n\t}\n\t\n\tfunction defineReactive(obj, key, val) {\n\t    var dep = new _dep2.default();\n\t    Object.defineProperty(obj, key, {\n\t        enumerable: true,\n\t        configurable: true,\n\t        get: function get() {\n\t            if (_dep2.default.target) {\n\t                dep.depend();\n\t            }\n\t            return val;\n\t        },\n\t        set: function set(newVal) {\n\t            if (newVal === val) return;\n\t            val = newVal;\n\t            dep.notify();\n\t        }\n\t    });\n\t}\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tvar _dep = __webpack_require__(2);\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\t/**\r\n\t * Watcher will call the callback when the value of the expression changes!\r\n\t */\n\tvar Watcher = function () {\n\t    /**\r\n\t     * @constructor\r\n\t     * @param model {model}\r\n\t     * @param expOrFn {string|function}\r\n\t     * @param callback {function}\r\n\t     */\n\t    function Watcher(model, expOrFn, callback) {\n\t        _classCallCheck(this, Watcher);\n\t\n\t        this.callback = callback;\n\t        this.model = model;\n\t\n\t        this.newDepIds = new Set();\n\t        this.newDeps = [];\n\t        this._getter = getGetter(expOrFn);\n\t        this.value = this.get();\n\t    }\n\t\n\t    /**\r\n\t     * get the value of the expression and collects the dep!\r\n\t     * @return {*}\r\n\t     */\n\t\n\t\n\t    _createClass(Watcher, [{\n\t        key: 'get',\n\t        value: function get() {\n\t            (0, _dep.pushTarget)(this);\n\t            var value = this._getter.call(this.model, this.model); // collects the deps!\n\t            (0, _dep.popTarget)();\n\t            return value;\n\t        }\n\t\n\t        /**\r\n\t         * add dep for the watcher\r\n\t         * @param dep {Dep}\r\n\t         */\n\t\n\t    }, {\n\t        key: 'addDep',\n\t        value: function addDep(dep) {\n\t            var id = dep.id;\n\t            if (!this.newDepIds.has(id)) {\n\t                this.newDepIds.add(id);\n\t                this.newDeps.push(dep);\n\t                dep.addSub(this);\n\t            }\n\t        }\n\t    }, {\n\t        key: 'update',\n\t        value: function update() {\n\t            this.run();\n\t        }\n\t\n\t        /**\r\n\t         * run the callback to update the value\r\n\t         */\n\t\n\t    }, {\n\t        key: 'run',\n\t        value: function run() {\n\t            var value = this.get();\n\t            if (value !== this.value) {\n\t                var oldValue = this.value;\n\t                this.value = value;\n\t                this.callback.call(this.model, value, oldValue);\n\t            }\n\t        }\n\t    }]);\n\t\n\t    return Watcher;\n\t}();\n\t\n\texports.default = Watcher;\n\t\n\t\n\tfunction getGetter(expOrFn) {\n\t    var getter = function getter() {\n\t        // do nothing..\n\t    };\n\t    if (typeof expOrFn === 'function') {\n\t        getter = expOrFn;\n\t    } else if (typeof expOrFn === 'string') {\n\t        getter = new Function('model', 'return model.' + expOrFn + ';');\n\t    } else {\n\t        console.warn(expOrFn + ' fail to parse!!');\n\t    }\n\t    return getter;\n\t}\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.default = normalizeExpression;\n\tvar MyRegExp = {\n\t    power: /(e|π|\\d+\\.?\\d*|\\(+[^\\)]*\\)+)\\^(\\d+\\.?\\d*|\\(+[^\\)]*\\)+)/g,\n\t    sqrt: /\\√(e|π|\\d+\\.?\\d*|\\(+[^\\)]*\\)+)/g,\n\t    factorial: /(\\d+\\.?\\d*|\\(+[^\\)]*\\)+)[\\!]/g\n\t};\n\t\n\tfunction normalizeBrace(expression) {\n\t    var leftNum = expression.match(/\\(/g) && expression.match(/\\(/g).length || 0;\n\t    var rightNum = expression.match(/\\)/g) && expression.match(/\\)/g).length || 0;\n\t    var differs = leftNum - rightNum;\n\t    if (differs < 0) return undefined;\n\t    var result = expression;\n\t    for (var i = 0; i < differs; i++) {\n\t        result += ')';\n\t    }\n\t    return result;\n\t}\n\t\n\tfunction normalizeFactory(reg, placer) {\n\t    return function (expression) {\n\t        var regArray = reg.exec(expression);\n\t        while (regArray !== null) {\n\t            expression = expression.replace(reg, placer(regArray));\n\t            regArray = reg.exec(expression);\n\t        }\n\t        return expression;\n\t    };\n\t}\n\t\n\tvar normalizePower = normalizeFactory(MyRegExp.power, function (regArray) {\n\t    return 'pow(' + regArray[0].split('^').join(',') + ')';\n\t});\n\t\n\tvar normalizeSqrt = normalizeFactory(MyRegExp.sqrt, function (regArray) {\n\t    return 'sqrt(' + regArray[0].split('√')[1] + ')';\n\t});\n\t\n\tvar normalizeFactorial = normalizeFactory(MyRegExp.factorial, function (regArray) {\n\t    return 'factor(' + regArray[0].split('!')[0] + ')';\n\t});\n\t\n\tfunction normalizeExpression(expression) {\n\t    return [expression, normalizeBrace, normalizePower, normalizeSqrt, normalizeFactorial].reduce(function (expression, wrapper) {\n\t        return wrapper(expression);\n\t    });\n\t}\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.default = normalizeStyle;\n\t\n\tvar _myQuery = __webpack_require__(1);\n\t\n\tvar _myQuery2 = _interopRequireDefault(_myQuery);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction normalizeStyle(model) {\n\t    return [model, normalizeInput, normalizeClass, normalizeOutput].reduce(function (model, wrapper) {\n\t        return wrapper(model);\n\t    });\n\t}\n\t\n\tfunction normalizeClass(model) {\n\t    (0, _myQuery2.default)('#input-quick').removeClass('high-light');\n\t    (0, _myQuery2.default)('#input').removeClass('low-light');\n\t    return model;\n\t}\n\t\n\tfunction normalizeOutput(model) {\n\t    var outputArray = model.output.split('\\n');\n\t    if (outputArray.length > 5) {\n\t        outputArray = outputArray.slice(1, outputArray.length);\n\t    }\n\t    model.output = outputArray.join('\\n');\n\t    return model;\n\t}\n\t\n\tfunction normalizeInput(model) {\n\t    model.input = '';\n\t    return model;\n\t}\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _util = __webpack_require__(11);\n\t\n\tfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\t\n\tvar Operation = {\n\t    math: [Math.sin, Math.cos, Math.tan, Math.log10, Math.log, Math.E, Math.PI, Math.pow, Math.sqrt, _util.factor],\n\t    string: ['sin', 'cos', 'tan', 'lg', 'ln', 'e', 'π', 'pow', 'sqrt', 'factor']\n\t};\n\t\n\t/**\r\n\t * convert the expression into a function that returns the value of the expression.\r\n\t * @param expression {string}\r\n\t * @return {Function} get the value if called!\r\n\t */\n\t\n\texports.default = function (expression) {\n\t    return function () {\n\t        return new (Function.prototype.bind.apply(Function, [null].concat(_toConsumableArray(Operation.string), ['return ' + expression + ';'])))().apply(null, Operation.math);\n\t    };\n\t};\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _myQuery = __webpack_require__(1);\n\t\n\tvar _myQuery2 = _interopRequireDefault(_myQuery);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/**\r\n\t * Regular Expressions collections used to delete chars.\r\n\t * @type {{trigonometricFunction: RegExp, logFunction: RegExp, operation: RegExp, number: RegExp}}\r\n\t */\n\tvar mathRegExp = {\n\t    trigonometricFunction: /cos\\($|sin\\($|tan\\($/,\n\t    logFunction: /lg\\($|ln\\($/,\n\t    operation: /\\+$|\\-$|\\*$|\\/$/,\n\t    number: /[0]$/\n\t};\n\t\n\texports.default = {\n\t    factorial: '!',\n\t    power: '^',\n\t    root: '√',\n\t\n\t    pi: 'π',\n\t    e: 'e',\n\t\n\t    sin: 'sin(',\n\t    cos: 'cos(',\n\t    tan: 'tan(',\n\t\n\t    left: '(',\n\t    right: ')',\n\t\n\t    '1': '1',\n\t    '2': '2',\n\t    '3': '3',\n\t    '4': '4',\n\t    '5': '5',\n\t    '6': '6',\n\t    '7': '7',\n\t    '8': '8',\n\t    '9': '9',\n\t    '0': '0',\n\t\n\t    plus: minusInput(mathRegExp.operation, '+'),\n\t    minus: minusInput(mathRegExp.operation, '-'),\n\t    multiply: minusInput(mathRegExp.operation, '*'),\n\t    divide: minusInput(mathRegExp.operation, '/'),\n\t\n\t    point: '.',\n\t    ln: 'ln(',\n\t    lg: 'lg(',\n\t\n\t    eq: onEqual,\n\t    backspace: onDelete,\n\t\n\t    ce: function ce() {\n\t        this.input = '0';\n\t    }\n\t};\n\t\n\t/**\r\n\t * delete a char before add a char\r\n\t * @param reg {RegExp}\r\n\t * @param stringAdded {string}\r\n\t * @return {Function}\r\n\t */\n\t\n\tfunction minusInput(reg, stringAdded) {\n\t    return function () {\n\t        var result = reg.test(this.input) ? this.input.slice(0, this.input.length - 1) : this.input;\n\t\n\t        this.input = result + stringAdded;\n\t    };\n\t}\n\t\n\t/**\r\n\t * when user clicks the eq block\r\n\t * this <===> model\r\n\t */\n\tfunction onEqual() {\n\t    this.isEqualed = true;\n\t    (0, _myQuery2.default)('#input').addClass('low-light');\n\t    (0, _myQuery2.default)('#input-quick').text(this.input ? '=' + this.result : '0').addClass('high-light');\n\t    this.output += this.input ? this.input + '=' + this.result + '\\n' : '0=0\\n';\n\t}\n\t\n\t/**\r\n\t * when user clicks the backspace\r\n\t * this <===> model\r\n\t */\n\tfunction onDelete() {\n\t    if (this.input === '') {\n\t        this.input = '0';\n\t        return;\n\t    }\n\t    if (mathRegExp.trigonometricFunction.test(this.input)) {\n\t        this.input = this.input.slice(0, this.input.length - 4);\n\t    } else if (mathRegExp.logFunction.test(this.input)) {\n\t        this.input = this.input.slice(0, this.input.length - 3);\n\t    } else {\n\t        this.input = this.input.slice(0, this.input.length - 1);\n\t    }\n\t}\n\n/***/ },\n/* 11 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\t/**\r\n\t * Compute the factorial of the number\r\n\t * @param num {number}\r\n\t * @return {number}\r\n\t */\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.factor = factor;\n\tfunction factor(num) {\n\t    if (num === 0) {\n\t        return 1;\n\t    }\n\t    if (num < 0) {\n\t        throw new Error('fail!!!');\n\t    }\n\t\n\t    var result = 1;\n\t    for (var i = 1; i <= num; i++) {\n\t        result = result * i;\n\t    }\n\t    return result;\n\t}\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** calc.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap b86100b6863a9617853e\n **/","'use strict';\r\n\r\nimport Hzy from './myQuery.js';\r\nimport Model from './myModel/index.js';\r\nimport Type from './types.js';\r\nimport parseExpression from './parser.js';\r\nimport normalizeStyle from './normalize/style.js';\r\nimport normalizeExpression from './normalize/expression.js';\r\nimport {addChar, showResult} from './helper.js';\r\n\r\n/**\r\n * Create a model of the screen in the calculator\r\n * @type {Model}\r\n */\r\nconst model = new Model({\r\n    data: {\r\n        output: '',\r\n        input: '0',\r\n        isEqualed: false\r\n    }\r\n});\r\n\r\n/**\r\n * Add and Bind Events\r\n */\r\nHzy('#panel').on('click', e => {\r\n    if (model.input === '0') model.input = ''; // normalize zero\r\n    if (model.isEqualed) {\r\n        normalizeStyle(model);\r\n        model.isEqualed = false;\r\n    }\r\n    addChar(model, Type[e.target.dataset['directive']]);\r\n});\r\n\r\n/**\r\n * Bind the data with the View!!!\r\n * Observe the Model, Update the View when the model's data change!\r\n */\r\nmodel.$watch('output', (newValue, oldValue) => {\r\n    if (newValue !== oldValue) {\r\n        Hzy('#output').text(newValue.trim());\r\n    }\r\n});\r\n\r\nmodel.$watch('input', (newValue, oldValue) => {\r\n    if (newValue !== oldValue) {\r\n        Hzy('#input').text(newValue);\r\n        const normalizedExpression = normalizeExpression(newValue);\r\n        const getter = parseExpression(normalizedExpression);\r\n        showResult(model, normalizedExpression, getter);\r\n    }\r\n});\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","'use strict';\r\n\r\nconst cache = {};\r\n\r\n/**\r\n * a tiny small Query just like jQuery 2333\r\n * @param DOMSelector {string|document}\r\n * @return {*}\r\n */\r\nexport default DOMSelector => {\r\n    if (typeof DOMSelector === 'string') {\r\n        if (cache[DOMSelector]) {\r\n            return cache[DOMSelector];\r\n        } else {\r\n            return cache[DOMSelector] = new HzyElement(DOMSelector);\r\n        }\r\n    } else if (DOMSelector === document) {\r\n        document.on = on.bind(document);\r\n        return document;\r\n    }\r\n}\r\n\r\n\r\nclass HzyElement {\r\n    constructor(DOMSelector) {\r\n        this.el = document.querySelector(DOMSelector);\r\n    }\r\n\r\n    /**\r\n     * Event binding\r\n     * @param EventName {string}\r\n     * @param callback {function}\r\n     * @return {HzyElement}\r\n     */\r\n    on(EventName, callback) {\r\n        on.call(this.el, EventName, callback);\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * add a class to the DOM\r\n     * @param className {string}\r\n     * @return {HzyElement}\r\n     */\r\n    addClass(className) {\r\n        if (this.el.classList)\r\n            this.el.classList.add(className);\r\n        else\r\n            this.el.className += ' ' + className;\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * remove a class\r\n     * @param className {string}\r\n     * @return {HzyElement}\r\n     */\r\n    removeClass(className) {\r\n        if (this.el.classList)\r\n            this.el.classList.remove(className);\r\n        else\r\n            this.el.className = this.el.className.replace(new RegExp('(^|\\\\b)' +\r\n                className.split(' ').join('|') + '(\\\\b|$)', 'gi'), ' ');\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * get/set text\r\n     * @param newText\r\n     * @return {*}\r\n     */\r\n    text(newText) {\r\n        if (typeof newText === 'undefined') {\r\n            return this.el.textContent;\r\n        }\r\n        this.el.textContent = newText;\r\n        return this;\r\n    }\r\n}\r\n\r\n/**\r\n * add events\r\n * @param EventName {string}\r\n * @param callback {function}\r\n * @return {object} the context of the function: this.\r\n */\r\nfunction on(EventName, callback) {\r\n    if (addEventListener) {\r\n        this.addEventListener(EventName.toLowerCase(), callback);\r\n    } else {\r\n        this[`on${EventName.toLowerCase()}`] = callback;\r\n    }\r\n    return this;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/myQuery.js\n **/","'use strict';\r\n\r\nlet uid = 0;\r\n\r\n/**\r\n * 订阅者模式\r\n */\r\nexport default class Dep {\r\n    constructor() {\r\n        this.id = uid++;\r\n        this.subs = [];\r\n    }\r\n\r\n    addSub(sub) {\r\n        this.subs.push(sub);\r\n    }\r\n\r\n    /**\r\n     * 通知依赖\r\n     */\r\n    depend() {\r\n        if (Dep.target) {\r\n            Dep.target.addDep(this);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 广播更新\r\n     */\r\n    notify() {\r\n        const subs = this.subs.slice();\r\n        subs.forEach(sub => {\r\n            sub.update();\r\n        });\r\n    }\r\n}\r\n\r\nDep.target = null;\r\n\r\nconst targetStack = [];\r\n\r\nexport function pushTarget(_target) {\r\n    if (Dep.target)\r\n        targetStack.push(Dep.target);\r\n    Dep.target = _target;\r\n}\r\n\r\nexport function popTarget() {\r\n    Dep.target = targetStack.pop()\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/myModel/observer/dep.js\n **/","'use strict';\r\n\r\nimport Hzy from './myQuery.js';\r\n\r\n/**\r\n * add a char to the calculator screen!\r\n * @param model {model}\r\n * @param directive {string|function}\r\n */\r\nexport function addChar(model, directive) {\r\n    if (typeof directive === 'string') {\r\n        model.input += directive;\r\n    } else if (typeof directive === 'function') {\r\n        directive.call(model);\r\n    } else {\r\n        console.warn('cannot parse this directive:', directive);\r\n    }\r\n}\r\n\r\n/**\r\n * EveryTime show the result of the expression on the screen!\r\n * @param model {model}\r\n * @param normalizedExpression {string}\r\n * @param valueGetter {function} return the value of the expression!\r\n */\r\nexport function showResult(model, normalizedExpression, valueGetter) {\r\n    let result = null;\r\n    try {\r\n        model.result = result = valueGetter();\r\n        if (typeof result === 'function') {\r\n            Hzy('#input-quick').text('Please enter number');\r\n        } else if (result) {\r\n            Hzy('#input-quick').text(`${normalizedExpression} = ${result}`);\r\n        } else {\r\n            Hzy('#input-quick').text('');\r\n        }\r\n    } catch (e) {\r\n        model.result = 'Syntax Error :(';\r\n        Hzy('#input-quick').text(model.result);\r\n    }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/helper.js\n **/","'use strict';\r\n\r\nimport {observe} from './observer/index.js';\r\nimport Watcher from './observer/watcher.js';\r\n\r\n/**\r\n * Just like the part of the model in MVVM!\r\n */\r\nexport default class Model {\r\n    constructor(options = {}) {\r\n        this._data = options.data;\r\n        this._watchers = [];\r\n        Object.keys(this._data).forEach(key => {\r\n            proxy(this, key);\r\n        });\r\n        observe(this._data);\r\n    }\r\n\r\n    /**\r\n     * when the vale of the expression changes,\r\n     * the callback would be called\r\n     * callback example:\r\n     *        (newValue, oldValue) => *, this <===> model\r\n     * @param expOrFn {string|function}\r\n     * @param callback {function}\r\n     */\r\n    $watch(expOrFn, callback) {\r\n        const watcher = new Watcher(this, expOrFn, callback);\r\n        this._watchers.push(watcher);\r\n    }\r\n}\r\n\r\n/**\r\n * proxy the properties\r\n * example:\r\n *      model.key <===> model._data.key\r\n * @param model {Model}\r\n * @param key {String}\r\n */\r\nfunction proxy(model, key) {\r\n    Object.defineProperty(model, key, {\r\n        configurable: true,\r\n        enumerable: true,\r\n        get: () => {\r\n            return model._data[key];\r\n        },\r\n        set: val => {\r\n            model._data[key] = val;\r\n        }\r\n    })\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/myModel/index.js\n **/","'use strict';\r\n\r\nimport Dep from './dep.js';\r\n\r\nclass Observer {\r\n    constructor(value) {\r\n        this.value = value;\r\n        Object.defineProperty(value, '__ob__', {\r\n            value: this,\r\n            enumerable: false,\r\n            writable: true,\r\n            configurable: true\r\n        });\r\n        this.walk(value);\r\n    }\r\n\r\n    /**\r\n     * travel all the props of the object, and set reactive props.\r\n     * @param obj {object}\r\n     */\r\n    walk(obj) {\r\n        Object.keys(obj).forEach(key => {\r\n            defineReactive(obj, key, obj[key]);\r\n        });\r\n    }\r\n}\r\n\r\n/**\r\n * observe a property and set a observer if the property doesn't own one;\r\n * @param value {object} the property that needs to be observed\r\n * @return {Observer|undefined} if it is a string or number, returns undefined\r\n */\r\nexport function observe(value) {\r\n    if (!value || typeof value !== 'object') {\r\n        return;\r\n    }\r\n    let ob;\r\n    if (value.hasOwnProperty('__ob__') && value['__ob__'] instanceof Observer) {\r\n        ob = value['__ob__'];\r\n    } else if (Object.isExtensible(value)) {\r\n        ob = new Observer(value);\r\n    }\r\n    return ob;\r\n}\r\n\r\nfunction defineReactive(obj, key, val) {\r\n    const dep = new Dep();\r\n    Object.defineProperty(obj, key, {\r\n        enumerable: true,\r\n        configurable: true,\r\n        get(){\r\n            if (Dep.target) {\r\n                dep.depend();\r\n            }\r\n            return val;\r\n        },\r\n        set(newVal){\r\n            if (newVal === val)\r\n                return;\r\n            val = newVal;\r\n            dep.notify();\r\n        }\r\n    });\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/myModel/observer/index.js\n **/","'use strict';\r\n\r\nimport {popTarget, pushTarget} from './dep.js';\r\n\r\n/**\r\n * Watcher will call the callback when the value of the expression changes!\r\n */\r\nexport default class Watcher {\r\n    /**\r\n     * @constructor\r\n     * @param model {model}\r\n     * @param expOrFn {string|function}\r\n     * @param callback {function}\r\n     */\r\n    constructor(model, expOrFn, callback) {\r\n        this.callback = callback;\r\n        this.model = model;\r\n\r\n        this.newDepIds = new Set();\r\n        this.newDeps = [];\r\n        this._getter = getGetter(expOrFn);\r\n        this.value = this.get();\r\n    }\r\n\r\n    /**\r\n     * get the value of the expression and collects the dep!\r\n     * @return {*}\r\n     */\r\n    get() {\r\n        pushTarget(this);\r\n        const value = this._getter.call(this.model, this.model); // collects the deps!\r\n        popTarget();\r\n        return value;\r\n    }\r\n\r\n    /**\r\n     * add dep for the watcher\r\n     * @param dep {Dep}\r\n     */\r\n    addDep(dep) {\r\n        const id = dep.id;\r\n        if (!this.newDepIds.has(id)) {\r\n            this.newDepIds.add(id);\r\n            this.newDeps.push(dep);\r\n            dep.addSub(this)\r\n        }\r\n    }\r\n\r\n    update() {\r\n        this.run();\r\n    }\r\n\r\n    /**\r\n     * run the callback to update the value\r\n     */\r\n    run() {\r\n        const value = this.get();\r\n        if (value !== this.value) {\r\n            const oldValue = this.value;\r\n            this.value = value;\r\n            this.callback.call(this.model, value, oldValue);\r\n        }\r\n    }\r\n}\r\n\r\nfunction getGetter(expOrFn) {\r\n    let getter = function () {\r\n        // do nothing..\r\n    };\r\n    if (typeof expOrFn === 'function') {\r\n        getter = expOrFn;\r\n    } else if (typeof expOrFn === 'string') {\r\n        getter = new Function('model', `return model.${expOrFn};`);\r\n    } else {\r\n        console.warn(`${expOrFn} fail to parse!!`);\r\n    }\r\n    return getter;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/myModel/observer/watcher.js\n **/","'use strict';\r\n\r\nconst MyRegExp = {\r\n    power: /(e|π|\\d+\\.?\\d*|\\(+[^\\)]*\\)+)\\^(\\d+\\.?\\d*|\\(+[^\\)]*\\)+)/g,\r\n    sqrt: /\\√(e|π|\\d+\\.?\\d*|\\(+[^\\)]*\\)+)/g,\r\n    factorial: /(\\d+\\.?\\d*|\\(+[^\\)]*\\)+)[\\!]/g,\r\n};\r\n\r\nfunction normalizeBrace(expression) {\r\n    const leftNum = expression.match(/\\(/g) && expression.match(/\\(/g).length || 0;\r\n    const rightNum = expression.match(/\\)/g) && expression.match(/\\)/g).length || 0;\r\n    const differs = leftNum - rightNum;\r\n    if (differs < 0)\r\n        return undefined;\r\n    let result = expression;\r\n    for (let i = 0; i < differs; i++) {\r\n        result += ')';\r\n    }\r\n    return result;\r\n}\r\n\r\nfunction normalizeFactory(reg, placer) {\r\n    return function (expression) {\r\n        let regArray = reg.exec(expression);\r\n        while (regArray !== null) {\r\n            expression = expression.replace(reg, placer(regArray));\r\n            regArray = reg.exec(expression);\r\n        }\r\n        return expression;\r\n    }\r\n}\r\n\r\nconst normalizePower = normalizeFactory(MyRegExp.power, regArray => {\r\n    return `pow(${regArray[0].split('^').join(',')})`;\r\n});\r\n\r\nconst normalizeSqrt = normalizeFactory(MyRegExp.sqrt, regArray => {\r\n    return `sqrt(${regArray[0].split('√')[1]})`;\r\n});\r\n\r\nconst normalizeFactorial = normalizeFactory(MyRegExp.factorial, regArray => {\r\n    return `factor(${regArray[0].split('!')[0]})`;\r\n});\r\n\r\n\r\nexport default function normalizeExpression(expression) {\r\n    return [expression, normalizeBrace, normalizePower, normalizeSqrt, normalizeFactorial].reduce((expression, wrapper) => {\r\n        return wrapper(expression);\r\n    });\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/normalize/expression.js\n **/","'use strict';\r\n\r\nimport Hzy from '../myQuery.js';\r\n\r\nexport default function normalizeStyle(model) {\r\n    return [model, normalizeInput, normalizeClass, normalizeOutput]\r\n        .reduce((model, wrapper) => wrapper(model));\r\n}\r\n\r\nfunction normalizeClass(model) {\r\n    Hzy('#input-quick').removeClass('high-light');\r\n    Hzy('#input').removeClass('low-light');\r\n    return model;\r\n}\r\n\r\nfunction normalizeOutput(model) {\r\n    let outputArray = model.output.split('\\n');\r\n    if (outputArray.length > 5) {\r\n        outputArray = outputArray.slice(1, outputArray.length);\r\n    }\r\n    model.output = outputArray.join('\\n');\r\n    return model;\r\n}\r\n\r\nfunction normalizeInput(model) {\r\n    model.input = '';\r\n    return model;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/normalize/style.js\n **/","'use strict';\r\n\r\nimport {factor} from './util.js';\r\n\r\nconst Operation = {\r\n    math: [Math.sin, Math.cos, Math.tan, Math.log10, Math.log, Math.E, Math.PI, Math.pow, Math.sqrt, factor],\r\n    string: ['sin', 'cos', 'tan', 'lg', 'ln', 'e', 'π', 'pow', 'sqrt', 'factor']\r\n};\r\n\r\n/**\r\n * convert the expression into a function that returns the value of the expression.\r\n * @param expression {string}\r\n * @return {Function} get the value if called!\r\n */\r\nexport default expression => () => {\r\n    return new Function(...Operation.string, `return ${expression};`).apply(null, Operation.math);\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/parser.js\n **/","'use strict';\r\n\r\nimport Hzy from './myQuery.js';\r\n\r\n/**\r\n * Regular Expressions collections used to delete chars.\r\n * @type {{trigonometricFunction: RegExp, logFunction: RegExp, operation: RegExp, number: RegExp}}\r\n */\r\nconst mathRegExp = {\r\n    trigonometricFunction: /cos\\($|sin\\($|tan\\($/,\r\n    logFunction: /lg\\($|ln\\($/,\r\n    operation: /\\+$|\\-$|\\*$|\\/$/,\r\n    number: /[0]$/,\r\n};\r\n\r\nexport default {\r\n    factorial: '!',\r\n    power: '^',\r\n    root: '√',\r\n\r\n    pi: 'π',\r\n    e: 'e',\r\n\r\n    sin: 'sin(',\r\n    cos: 'cos(',\r\n    tan: 'tan(',\r\n\r\n    left: '(',\r\n    right: ')',\r\n\r\n    '1': '1',\r\n    '2': '2',\r\n    '3': '3',\r\n    '4': '4',\r\n    '5': '5',\r\n    '6': '6',\r\n    '7': '7',\r\n    '8': '8',\r\n    '9': '9',\r\n    '0': '0',\r\n\r\n    plus: minusInput(mathRegExp.operation, '+'),\r\n    minus: minusInput(mathRegExp.operation, '-'),\r\n    multiply: minusInput(mathRegExp.operation, '*'),\r\n    divide: minusInput(mathRegExp.operation, '/'),\r\n\r\n    point: '.',\r\n    ln: 'ln(',\r\n    lg: 'lg(',\r\n\r\n    eq: onEqual,\r\n    backspace: onDelete,\r\n\r\n    ce(){\r\n        this.input = '0';\r\n    }\r\n};\r\n\r\n/**\r\n * delete a char before add a char\r\n * @param reg {RegExp}\r\n * @param stringAdded {string}\r\n * @return {Function}\r\n */\r\nfunction minusInput(reg, stringAdded) {\r\n    return function () {\r\n        let result = reg.test(this.input)\r\n            ? this.input.slice(0, this.input.length - 1)\r\n            : this.input;\r\n\r\n        this.input = result + stringAdded;\r\n    };\r\n}\r\n\r\n/**\r\n * when user clicks the eq block\r\n * this <===> model\r\n */\r\nfunction onEqual() {\r\n    this.isEqualed = true;\r\n    Hzy('#input').addClass('low-light');\r\n    Hzy('#input-quick').text(this.input ? `=${this.result}` : `0`).addClass('high-light');\r\n    this.output += this.input ? `${this.input}=${this.result}\\n` : '0=0\\n';\r\n}\r\n\r\n/**\r\n * when user clicks the backspace\r\n * this <===> model\r\n */\r\nfunction onDelete() {\r\n    if (this.input === '') {\r\n        this.input = '0';\r\n        return;\r\n    }\r\n    if (mathRegExp.trigonometricFunction.test(this.input)) {\r\n        this.input = this.input.slice(0, this.input.length - 4);\r\n    } else if (mathRegExp.logFunction.test(this.input)) {\r\n        this.input = this.input.slice(0, this.input.length - 3);\r\n    } else {\r\n        this.input = this.input.slice(0, this.input.length - 1);\r\n    }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/types.js\n **/","'use strict';\r\n\r\n/**\r\n * Compute the factorial of the number\r\n * @param num {number}\r\n * @return {number}\r\n */\r\nexport function factor(num) {\r\n    if (num === 0) {\r\n        return 1;\r\n    }\r\n    if (num < 0) {\r\n        throw new Error('fail!!!');\r\n    }\r\n\r\n    let result = 1;\r\n    for (let i = 1; i <= num; i++) {\r\n        result = result * i;\r\n    }\r\n    return result;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/util.js\n **/"],"sourceRoot":""}