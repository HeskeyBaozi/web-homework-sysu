/*!
 * simple-calculator 0.0.0 - Modern Web Programming HomeWork - SYSU
 * Copyright (c) 2016 He Zhiyu - https://github.com/HeskeyBaozi/web-homework-sysu#readme
 * License: MIT
 */
!function(t){function e(u){if(n[u])return n[u].exports;var r=n[u]={exports:{},id:u,loaded:!1};return t[u].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function u(t){return t&&t.__esModule?t:{"default":t}}var r=n(1),i=u(r),o=n(5),a=u(o),c=n(11),l=u(c),f=n(10),s=u(f),d=n(9),p=u(d),h=n(8),v=u(h),g=n(4),y=new a["default"]({data:{output:"",input:"0",isEqualed:!1}});(0,i["default"])("#panel").on("click",function(t){"0"===y.input&&(y.input=""),y.isEqualed&&((0,p["default"])(y),y.isEqualed=!1),(0,g.addChar)(y,l["default"][t.target.dataset.directive])}),y.$watch("output",function(t,e){t!==e&&(0,i["default"])("#output").text(t.trim())}),y.$watch("input",function(t,e){if(t!==e){(0,i["default"])("#input").text(t);var n=(0,v["default"])(t),u=(0,s["default"])(n);(0,g.showResult)(this,n,u)}}),y.$watch("isEqualed",function(t,e){t!==e&&t&&((0,i["default"])("#input").addClass("low-light"),(0,i["default"])("#input-quick").text(this.input?"="+this.result:"0").addClass("high-light"))})},function(t,e){t.exports=jQuery},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t){a.target&&c.push(a.target),a.target=t}function r(){a.target=c.pop()}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var u=e[n];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}return function(e,n,u){return n&&t(e.prototype,n),u&&t(e,u),e}}();e.pushTarget=u,e.popTarget=r;var o=0,a=function(){function t(){n(this,t),this.id=o++,this.subs=[]}return i(t,[{key:"addSub",value:function(t){this.subs.push(t)}},{key:"depend",value:function(){t.target&&t.target.addDep(this)}},{key:"notify",value:function(){var t=this.subs.slice();t.forEach(function(t){t.update()})}}]),t}();e["default"]=a,a.target=null;var c=[]},function(t,e){t.exports=_},function(t,e,n){"use strict";function u(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){"string"==typeof e?t.input+=e:"function"==typeof e?e.call(t):console.warn("cannot parse this directive:",e)}function i(t,e,n){try{t.result=n(),(0,a["default"])("#input-quick").text("function"==typeof t.result?"Please enter number":t.result?e+" = "+t.result:"")}catch(u){t.result="Syntax Error :(",(0,a["default"])("#input-quick").text(t.result)}}Object.defineProperty(e,"__esModule",{value:!0}),e.addChar=r,e.showResult=i;var o=n(1),a=u(o)},function(t,e,n){"use strict";function u(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return t._data[e]},set:function(n){t._data[e]=n}})}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var u=e[n];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}return function(e,n,u){return n&&t(e.prototype,n),u&&t(e,u),e}}(),a=n(6),c=n(7),l=u(c),f=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t),this._data=n.data,this._watchers=[],Object.keys(this._data).forEach(function(t){i(e,t)}),(0,a.observe)(this._data)}return o(t,[{key:"$watch",value:function(t,e){var n=new l["default"](this,t,e);this._watchers.push(n)}}]),t}();e["default"]=f},function(t,e,n){"use strict";function u(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t){if(t&&"object"===("undefined"==typeof t?"undefined":a(t))){var e=void 0;return t.hasOwnProperty("__ob__")&&t.__ob__ instanceof s?e=t.__ob__:Object.isExtensible(t)&&(e=new s(t)),e}}function o(t,e,n){var u=new f["default"];Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){return f["default"].target&&u.depend(),n},set:function(t){t!==n&&(n=t,u.notify())}})}Object.defineProperty(e,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},c=function(){function t(t,e){for(var n=0;n<e.length;n++){var u=e[n];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}return function(e,n,u){return n&&t(e.prototype,n),u&&t(e,u),e}}();e.observe=i;var l=n(2),f=u(l),s=function(){function t(e){r(this,t),this.value=e,Object.defineProperty(e,"__ob__",{value:this,enumerable:!1,writable:!0,configurable:!0}),this.walk(e)}return c(t,[{key:"walk",value:function(t){Object.keys(t).forEach(function(e){o(t,e,t[e])})}}]),t}()},function(t,e,n){"use strict";function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t){var e=function(){};return"function"==typeof t?e=t:"string"==typeof t?e=new Function("model","return model."+t+";"):console.warn(t+" fail to parse!!"),e}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var u=e[n];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(t,u.key,u)}}return function(e,n,u){return n&&t(e.prototype,n),u&&t(e,u),e}}(),o=n(2),a=function(){function t(e,n,i){u(this,t),this.callback=i,this.model=e,this.newDepIds=new Set,this.newDeps=[],this._getter=r(n),this.value=this.get()}return i(t,[{key:"get",value:function(){(0,o.pushTarget)(this);var t=this._getter.call(this.model,this.model);return(0,o.popTarget)(),t}},{key:"addDep",value:function(t){var e=t.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(t),t.addSub(this))}},{key:"update",value:function(){this.run()}},{key:"run",value:function(){var t=this.get();if(t!==this.value){var e=this.value;this.value=t,this.callback.call(this.model,t,e)}}}]),t}();e["default"]=a},function(t,e,n){"use strict";function u(t){return t&&t.__esModule?t:{"default":t}}function r(t){var e=[t.match(/\(/g)&&t.match(/\(/g).length||0,t.match(/\)/g)&&t.match(/\)/g).length||0].reduce(function(t,e){return t-e});return e<0?void 0:i(t,e)}function i(t,e){var n=t;return l["default"].times(e,function(){n+=")"}),n}function o(t,e){return function(n){for(var u=t.exec(n);null!==u;)n=n.replace(t,e(u)),u=t.exec(n);return n}}function a(t){return l["default"].flow(r,s,d,p,h)(t)}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=a;var c=n(3),l=u(c),f={power:/(e|π|\d+\.?\d*|\(+[^\)]*\)+)\^(\d+\.?\d*|\(+[^\)]*\)+)/g,sqrt:/\√(e|π|\d+\.?\d*|\(+[^\)]*\)+)/g,factorial:/(\d+\.?\d*|\(+[^\)]*\)+)[\!]/g,numberBeforeOperation:/\d+\.?\d*(sin|cos|tan|lg|ln|pow|sqrt|e|π)/g},s=o(f.power,function(t){return"pow("+t[0].split("^").join(",")+")"}),d=o(f.sqrt,function(t){return"sqrt("+t[0].split("√")[1]+")"}),p=o(f.factorial,function(t){return"factor("+t[0].split("!")[0]+")"}),h=o(f.numberBeforeOperation,function(t){return t[0].replace(/\d+\.?\d*/g,function(t){return t+"*"})})},function(t,e,n){"use strict";function u(t){return t&&t.__esModule?t:{"default":t}}function r(t){return(0,c["default"])("#input-quick").removeClass("high-light"),(0,c["default"])("#input").removeClass("low-light"),t}function i(t){var e=t.output.split("\n");return e.length>5&&(e=e.slice(1,e.length)),t.output=e.join("\n"),t}function o(t){return t.input="",t}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),c=u(a),l=n(3),f=u(l);e["default"]=function(t){return f["default"].flow(o,r,i)(t)}},function(t,e,n){"use strict";function u(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0});var r=n(12),i={math:[Math.sin,Math.cos,Math.tan,Math.log10,Math.log,Math.E,Math.PI,Math.pow,Math.sqrt,r.factor],string:["sin","cos","tan","lg","ln","e","π","pow","sqrt","factor"]};e["default"]=function(t){return function(){return(new(Function.prototype.bind.apply(Function,[null].concat(u(i.string),["return "+t+";"])))).apply(null,i.math)}}},function(t,e){"use strict";function n(t,e){return function(){var n=t.test(this.input)?this.input.slice(0,this.input.length-1):this.input;this.input=n+e}}function u(){this.isEqualed=!0,this.output+=this.input?this.input+" = "+this.result+"\n":"0=0\n"}function r(){return""===this.input?void(this.input="0"):void i(this)}function i(t){t.input=o.trigonometricFunction.test(t.input)?t.input.slice(0,t.input.length-4):o.logFunction.test(t.input)?t.input.slice(0,t.input.length-3):t.input.slice(0,t.input.length-1)}Object.defineProperty(e,"__esModule",{value:!0});var o={trigonometricFunction:/cos\($|sin\($|tan\($/,logFunction:/lg\($|ln\($/,operation:/\+$|\-$|\*$|\/$/,number:/[0]$/};e["default"]={factorial:"!",power:"^",root:"√",pi:"π",e:"e",sin:"sin(",cos:"cos(",tan:"tan(",left:"(",right:")",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9",0:"0",plus:n(o.operation,"+"),minus:n(o.operation,"-"),multiply:n(o.operation,"*"),divide:n(o.operation,"/"),point:".",ln:"ln(",lg:"lg(",eq:u,backspace:r,ce:function(){this.input="0"}}},function(t,e){"use strict";function n(t){if(0===t)return 1;if(t<0)throw new Error("fail!!!");for(var e=1,n=1;n<=t;n++)e*=n;return e}Object.defineProperty(e,"__esModule",{value:!0}),e.factor=n}]);
//# sourceMappingURL=calc.js.map