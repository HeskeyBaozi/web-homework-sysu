/*!
 * web-homework-sysu 0.0.0 - Modern Web Programming HomeWork - SYSU
 * Copyright (c) 2016 He Zhiyu - https://github.com/HeskeyBaozi/web-homework-sysu#readme
 * License: MIT
 */
!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e){a(e),E.$selectors.addClass("no-see"),i(e)}function a(e){S["default"].assign(e,{isRunning:!1,startButton:"Give Up : (",time:0,count:0,isWinner:!1,message:"Game Starting..."})}function i(e){var t=setInterval(function(){e.gameState===M.Type.Pending?e.time++:clearInterval(t)},1e3)}function u(e){e.isWinner&&E.$selectors.removeClass("no-see"),S["default"].assign(e,{message:(e.isWinner?"Congratulations!":"Try your best.")+" Time:"+e.time+", Count:"+e.count,startButton:e.isWinner?"Start!":"Getting Solution...",time:0,count:0})}function c(e){(0,x.isSolved)(e.blockMap)&&(e.isWinner=!0,e.gameState=M.Type.Unstarted),e.gameState===M.Type.Pending&&e.count++}function s(e){e.startButton="Mixing...",(0,x.mix)(e,E.$blank[0],E.updater,P.selectElement).then(function(){e.gameState=M.Type.Pending})}function f(e){e.gameState=M.Type.Unstarted,d(e),p(T.AStar,l(e,P.selectElement)).then(function(t){return h(e,t)}).then(function(){b(e)})}function l(e,t){var n=(0,x.getterFactory)(e.blockMap,t);return new j.Node(e.blockMap,n(E.$blank[0]),null)}function d(e){E.$loading.removeClass("disable-see")}function p(e,t){return new Promise(function(n,r){S["default"].delay(function(){n(e(t))},20)})}function h(e,t){var n=y(t);return g(e),new Promise(function(e,t){(0,x.showSolutionAsync)(n,E.updater,e)})}function y(e){for(var t=[],n=e;n.parentNode;)t.push(n),n=n.parentNode;return t}function g(e){E.$loading.addClass("disable-see"),S["default"].assign(e,{startButton:"Recovering...",isRunning:!0})}function b(e){E.$selectors.removeClass("no-see"),S["default"].assign(e,{startButton:"Try Again! : )",isRunning:!1})}var m=n(9),v=r(m),_=n(13),w=r(_),k=n(6),S=r(k),x=n(3),j=n(1),M=n(12),P=n(2),T=n(7),O=new v["default"]({target:".container",data:{imgUrl:"",blockMap:Array.from(document.querySelectorAll(".block")).map(function(e,t){return{element:e,correctIndex:t}}),startButton:"Start!",gameState:M.Type.Unstarted,isRunning:!1,isWinner:!1,time:0,count:0,message:"Welcome to play the Puzzle!!",stepNumber:15}}),E={$blank:(0,w["default"])("#blk-15"),$loading:(0,w["default"])("#loading"),$startBtn:(0,w["default"])("#start"),$selectors:(0,w["default"])(".img-groups"),updater:x.update.bind(O)};O.$watch("imgUrl",function(e,t){var n=new Image,r=this.blockMap.map(function(e){return e.element.getContext("2d")});n.src=e,n.onload=function(){(0,x.drawCanvas)(r,n)}}),O.imgUrl="./img/panda.jpg",O.$watch("gameState",function(e,t){M.Type.Pending===e&&o(this),M.Type.Pending===t&&u(this)}),O.$watch("isRunning",function(e){e?(E.$startBtn.addClass("disable-click"),E.$selectors.addClass("no-see")):E.$startBtn.removeClass("disable-click")}),(0,w["default"])(".playground").click(function(e){e.preventDefault();var t=(0,x.getterFactory)(O.blockMap,P.selectElement),n=(0,x.move)(t(e.target),t(E.$blank[0]),O.blockMap);n&&(x.update.call(O,n.state),c(O))}),E.$startBtn.click(function(e){e.preventDefault(),O.isRunning||(O.gameState===M.Type.Unstarted?s(O):O.gameState===M.Type.Pending&&f(O))}),E.$selectors.click(function(e){if(e.preventDefault(),O.gameState===M.Type.Unstarted){var t=M.Img.find(function(t){return t.name===e.target.id});t&&(O.imgUrl=t.url.img)}}),console.log(O)},function(e,t,n){"use strict";function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return 6*e.manhatten+3*e.geometric}function u(e,t){return{manhatten:c(e,t),geometric:s(e,t)}}function c(e,t){return Math.abs(e%4-t%4)+Math.abs(e>>2-t>>2)}function s(e,t){return Math.sqrt(Math.pow(e%4-t%4,2)+Math.pow(e>>2-t>>2,2))}function f(e,t){return e.manhatten+=t.manhatten,e.geometric+=t.geometric,e}function l(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}Object.defineProperty(t,"__esModule",{value:!0}),t.PriorityQueue=t.Node=void 0;var d=n(2);t.Node=function p(e,t,n){a(this,p),Object.assign(this,{state:e,blankTargetIndex:t,parentNode:n,depth:null!==n?n.depth+1:0}),this.h=i(this.state.map(d.selectNumber).map(u).reduce(f))},t.PriorityQueue=function(e){function t(e){a(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.push(null),n.compare=e,n.enqueue=function(e){this.push(e);for(var t=this.length-1;t>1;){var n=t>>1;if(!(this.compare(this[t],this[n])<0))break;l(this,n,t),t=n}},n.dequeue=function(){var e=this,t=this[1];this[1]=this.pop(),2===this.length&&this.pop();for(var n=[1],r=function(){var t=n.shift(),r=t,o=[t<<1,t<<1|1];o.filter(function(t){return t<e.length}).forEach(function(t){e.compare(e[t],e[r])<0&&(r=t)}),t!==r&&(l(e,t,r),n.push(r))};n.length;)r();return t},n.empty=function(){return this.length<=1},n}return o(t,e),t}(Array)},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.selectElement=function(e){return e.element},t.selectNumber=function(e){return e.correctIndex},t.selectOriginal=function(e){return e}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t,n){if(s(e).some(function(e){return e===t}))return{state:a(n,e,t),blankTargetIndex:e,parentState:n}}function a(e,t,n){var r=v["default"].clone(e);return r[t]=e[n],r[n]=e[t],r}function i(e,t){var n=o(e,t.blankTargetIndex,t.state);return new b.Node(n.state,n.blankTargetIndex,t)}function u(e,t,n){return function r(a,i,u,c){var f=v["default"].sample(s(i).filter(function(e){return e!==a})),l=o(f,i,u);c(l.state),e--?v["default"].delay(function(){return r(i,l.blankTargetIndex,l.state,c)},t):n(l)}}function c(e){var t=y(e,this.blockMap);g(t,e),this.blockMap=e}function s(e){return[{X:0,Y:-1},{X:1,Y:0},{X:0,Y:1},{X:-1,Y:0}].map(function(t){return{X:e%4+t.X,Y:Math.floor(e/4)+t.Y}}).filter(function(e){return e.X>=0&&e.X<4&&e.Y>=0&&e.Y<4}).map(function(e){return 4*e.Y+e.X})}function f(e,t){return function(n){return e.map(t).findIndex(function(e){return e===n})}}function l(e,t,n){e.length?(t(e.pop().state),v["default"].delay(function(){l(e,t,n)},120)):n(e)}function d(e,t){e.forEach(function(e,n){return e.drawImage(t,n%4*(t.width/4),Math.floor(n/4)*(t.height/4),t.width/4,t.height/4,0,0,100,100)});var n=e[e.length-1];n.fillStyle="rgba(120, 120, 120, 0.7)",n.fillRect(0,0,100,100)}function p(e,t,n,r){var o=f(e.blockMap,r),a=v["default"].flow(o,s,v["default"].sample)(t);return new Promise(function(r,i){e.isRunning=!0,u(e.stepNumber,120,r)(a,o(t),e.blockMap,n)})}function h(e){return e.every(function(e,t){return e.correctIndex===t})}function y(e,t){var n=[];return e.forEach(function(e,r){var o=t[r];e.correctIndex!==o.correctIndex&&n.push({before:o.correctIndex,after:e.correctIndex,index:r})}),n}function g(e,t){e.forEach(function(e){var n=t[e.index].element;n.className=n.className.replace(/order-\d*/,"order-"+e.index)})}Object.defineProperty(t,"__esModule",{value:!0}),t.move=o,t.search=i,t.randomlySelectAndMoveAsync=u,t.update=c,t.getNeighboursIndex=s,t.getterFactory=f,t.showSolutionAsync=l,t.drawCanvas=d,t.mix=p,t.isSolved=h;var b=n(1),m=n(6),v=r(m)},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e){u.target&&c.push(u.target),u.target=e}function o(){u.target=c.pop()}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.pushTarget=r,t.popTarget=o;var i=0,u=function(){function e(){n(this,e),this.id=i++,this.subs=[]}return a(e,[{key:"addSub",value:function(e){this.subs.push(e)}},{key:"depend",value:function(){e.target&&e.target.addDependency(this)}},{key:"notify",value:function(){var e=this.subs.slice();e.forEach(function(e){e.update()})}}]),e}();t["default"]=u,u.target=null;var c=[]},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){var t=function(){};return"function"==typeof e?t=e:"string"==typeof e?t=new Function("model","return model."+e+";"):console.warn(e+" fail to parse!!"),t}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.getGetter=o;var u=n(4),c=function(){function e(t,n,a){r(this,e),this.callback=a,this.model=t,this.newDepIds=new Set,this.newDeps=[],this._getter=o(n),this.value=this.get()}return i(e,[{key:"get",value:function(){(0,u.pushTarget)(this);var e=this._getter.call(this.model,this.model);return(0,u.popTarget)(),e}},{key:"addDependency",value:function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),e.addSub(this))}},{key:"update",value:function(){return this.run(),this}},{key:"run",value:function(){var e=this.get();if(e!==this.value||"object"===("undefined"==typeof e?"undefined":a(e))){var t=this.value;this.value=e,this.callback.call(this.model,e,t)}}}]),e}();t["default"]=c},function(e,t){e.exports=_},function(e,t,n){"use strict";function r(e){for(var t=o(e),n=c(t,2),r=n[0],a=n[1],s=function(){var e=r.dequeue();return(0,l.isSolved)(e.state)?{v:e}:void(0,l.getNeighboursIndex)(e.blankTargetIndex).forEach(function(t){return i((0,l.search)(t,e),a,r)})};!r.empty();){var f=s();if("object"===("undefined"==typeof f?"undefined":u(f)))return f.v}}function o(e){var t=new s.PriorityQueue(a),n=new Set;return t.enqueue(e),[t,n]}function a(e,t){return e.h-t.h+e.depth-t.depth}function i(e,t,n){var r=e.state.map(f.selectNumber).toString();t.has(r)||(n.enqueue(e),t.add(r))}Object.defineProperty(t,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},c=function(){function e(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(c){o=!0,a=c}finally{try{!r&&u["return"]&&u["return"]()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.AStar=r;var s=n(1),f=n(2),l=n(3)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){var n=e.childNodes,r=!0,i=!1,u=void 0;try{for(var c,s=n[Symbol.iterator]();!(r=(c=s.next()).done);r=!0){var f=c.value;3===f.nodeType?a(f,t):1===f.nodeType&&o(f,t)}}catch(l){i=!0,u=l}finally{try{!r&&s["return"]&&s["return"]()}finally{if(i)throw u}}}function a(e,t){var n=i(e.textContent);if(n){var r=document.createDocumentFragment();n.forEach(function(e){var n=void 0;e.expression?(n=document.createTextNode((0,u.getGetter)(e.expression)(t)),t._watchers.push(new c["default"](t,e.expression,function(e,t){n.textContent=e}))):n=document.createTextNode(e.value),r.appendChild(n)});var o=e.parentNode;o.replaceChild(r,e)}}function i(e){if(s.test(e)){for(var t=[],n=s.lastIndex=0,r=void 0,o=void 0;r=s.exec(e);){o=r.index,o>n&&t.push({value:e.slice(n,o)});var a=r[1];t.push({expression:a,value:a}),n=o+r[0].length}return n<e.length&&t.push({value:e.slice(n)}),t}}Object.defineProperty(t,"__esModule",{value:!0}),t.compile=o;var u=n(5),c=r(u),s=/\{\{((?:.|\n)+?)\}\}/g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){return e._data[t]},set:function(n){e._data[t]=n}})}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(11),c=n(8),s=n(5),f=r(s),l=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,e),this._data=n.data,this._watchers=[],this._target=n.target?document.querySelector(n.target):void 0,Object.keys(this._data).forEach(function(e){a(t,e)}),(0,u.observe)(this._data),this._target&&(0,c.compile)(this._target,this)}return i(e,[{key:"$watch",value:function(e,t){var n=new f["default"](this,e,t);this._watchers.push(n)}}]),e}();t["default"]=l},function(e,t){"use strict";function n(e,t,n){var r=void 0;switch(e){case"push":r=t;break;case"unshift":r=t;break;case"splice":r=t.slice(2)}r&&n.observeArray(r)}Object.defineProperty(t,"__esModule",{value:!0});var r=t.arrayMethods=Object.create(Array.prototype);["push","dequeue","shift","unshift","sort","reverse","splice"].forEach(function(e){var t=Array.prototype[e];Object.defineProperty(r,e,{enumerable:!1,writable:!0,configurable:!0,value:function(){var r=Array.from(arguments),o=t.apply(this,r),a=this.__ob__;return n(e,r,a),a.dep.notify(),o}})})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e){if(e&&"object"===("undefined"==typeof e?"undefined":c(e))){var t=void 0;return e.hasOwnProperty("__ob__")&&e.__ob__ instanceof p?t=e.__ob__:Object.isExtensible(e)&&(t=new p(e)),t}}function i(e,t,n){var r=new l["default"],o=a(n);Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){return l["default"].target&&(r.depend(),o&&o.dep.depend(),Array.isArray(n)&&n.forEach(function(e){e&&e.__ob__&&e.__ob__.dep.depend()})),n},set:function(e){e!==n&&(n=e,r.notify())}})}function u(e,t){e.__proto__=t}Object.defineProperty(t,"__esModule",{value:!0});var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.observe=a;var f=n(4),l=r(f),d=n(10),p=function(){function e(t){o(this,e),this.value=t,this.dep=new l["default"],Object.defineProperty(t,"__ob__",{value:this,enumerable:!1,writable:!0,configurable:!0}),Array.isArray(t)?(u(t,d.arrayMethods),this.observeArray(t)):this.walk(t)}return s(e,[{key:"walk",value:function(e){Object.keys(e).forEach(function(t){i(e,t,e[t])})}},{key:"observeArray",value:function(e){e.forEach(function(e){a(e)})}}]),e}()},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Type={Unstarted:"UNSTARTED",Pending:"PENDING",Win:"WIN",Lose:"LOSE",Over:"OVER"},t.Img=[{name:"panda",url:{img:"./img/panda.jpg",bg:"./img/bg_gfpanda.jpg"}},{name:"overwatch",url:{img:"./img/img_overwatch.jpg",bg:"./img/bg_overwatch.jpg"}},{name:"zootopia",url:{img:"./img/img_zootopia.jpeg",bg:"./img/bg_zootopia.jpeg"}},{name:"baymax",url:{img:"./img/img_baymax.jpg",bg:"./img/bg_baymax.jpg"}}]},function(e,t){e.exports=jQuery}]);
//# sourceMappingURL=bundle.js.map