{"version":3,"sources":["webpack:///webpack/bootstrap a6f06cbbc45efc90ab4f","webpack:///./src/index.js","webpack:///./src/myModel/index.js","webpack:///./src/myModel/observer/index.js","webpack:///./src/myModel/observer/dependency.js","webpack:///./src/myModel/observer/array.js","webpack:///./src/myModel/compiler.js","webpack:///./src/myModel/observer/watcher.js","webpack:///external \"jQuery\"","webpack:///./src/helper.js","webpack:///./src/util.js","webpack:///./src/data-structure.js","webpack:///./src/selector.js","webpack:///external \"_\"","webpack:///./src/type.js","webpack:///./src/algorithm.js"],"names":["model","target","data","imgUrl","blockMap","Array","from","document","querySelectorAll","map","element","index","correctIndex","startButton","gameState","Unstarted","isRunning","isWinner","time","count","message","stepNumber","cache","$blank","$loading","$startBtn","$selectors","updater","bind","$watch","newValue","oldValue","img","Image","ctxArray","object","getContext","src","onload","Pending","handleBeginningGame","handleEndingGame","normalizeInitialGameData","addClass","beginCount","Object","assign","timeUid","setInterval","clearInterval","removeClass","click","e","preventDefault","getIndex","nextDescriptor","call","state","handleMovedMap","startGame","stopGame","then","handleStoppingGame","asyncRunningAlgorithm","generateInitialNode","displaySolution","resultNode","handleEndingDisplaying","selector","algorithm","args","Promise","resolve","reject","setTimeout","path","collectSolutionPath","handleResolvingDisplaying","parentNode","push","currentImg","find","imageInfo","name","id","url","console","log","Model","options","_data","_watchers","_target","querySelector","undefined","keys","forEach","proxy","key","expOrFn","callback","watcher","defineProperty","configurable","enumerable","get","set","newVal","observe","Observer","value","dep","writable","isArray","augment","observeArray","walk","obj","defineReactive","items","ob","hasOwnProperty","isExtensible","val","childObserver","depend","item","notify","__proto__","pushTarget","popTarget","uid","Dependency","subs","sub","addDependency","slice","update","targetStack","pop","arrayMethods","create","prototype","original","methodName","arguments","result","apply","observer","observeNewItems","inserted","compile","nodeList","childNodes","node","nodeType","compileTextNode","tagRE","textNode","tokens","parseText","textContent","frag","createDocumentFragment","ele","expression","createTextNode","appendChild","replaceChild","text","test","lastIndex","match","exec","exp","length","getGetter","Watcher","newDepIds","Set","newDeps","_getter","has","add","addSub","run","getter","Function","warn","move","search","randomlySelectAndMoveAsync","getNeighboursIndex","getterFactory","showSolutionAsync","drawCanvas","mix","isSolved","targetIndex","blankTargetIndex","some","neighboursIndex","nextMap","parentState","currentNode","subNode","times","speed","randomlyMove","preTargetIndex","sample","filter","nextState","patches","diff","render","X","Y","offset","Math","floor","position","findIndex","canvasContextArray","image","ctx","drawImage","width","height","last","fillStyle","fillRect","blankElement","getElementIndex","flow","every","newMap","oldMap","newObject","oldObject","before","after","patch","className","replace","getRandomInt","min","max","random","Node","depth","h","computeH","mapIndexToDistanceObject","reduce","objectReducer","distanceObject","manhatten","geometric","number","getManhattenDistance","getGeometricDistance","to","abs","sqrt","pow","leftObject","rightObject","PriorityQueue","compare","enqueue","currentIndex","parentIndex","swap","dequeue","TopItem","Q","shift","minChildIndex","childIndexArray","childIndex","empty","array","leftIndex","rightIndex","temp","selectElement","o","selectNumber","selectOriginal","Type","Win","Lose","Over","Img","bg","AStar","rootNode","PQ","S","timeEnd","tryInsertToSet","left","right","nextNode","priorityQueue","signature","toString"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap a6f06cbbc45efc90ab4f\n **/","'use strict';\r\n\r\nimport Model from './myModel/index.js';\r\nimport $ from 'jquery';\r\nimport {\r\n    move,\r\n    getterFactory,\r\n    update,\r\n    showSolutionAsync,\r\n    drawCanvas,\r\n    mix,\r\n    isSolved\r\n} from  './helper.js'\r\nimport {Node} from './data-structure.js';\r\nimport {Type, Img} from './type.js';\r\nimport {selectElement} from './selector.js';\r\nimport {AStar} from './algorithm.js';\r\n\r\n/**\r\n *           That's Me!\r\n *              ↓ ↓\r\n * View <==> View-Model <==> Model\r\n */\r\nconst model = new Model({\r\n    target: '.container',\r\n    data: {\r\n        imgUrl: '',\r\n        blockMap: Array\r\n            .from(document.querySelectorAll('.block'))\r\n            .map((element, index) => ({element, correctIndex: index})),\r\n        startButton: 'Start!',\r\n        gameState: Type.Unstarted,\r\n        isRunning: false,\r\n        isWinner: false,\r\n        time: 0,\r\n        count: 0,\r\n        message: 'Welcome to play the Puzzle!!',\r\n        stepNumber: 15\r\n    }\r\n});\r\n\r\n/**\r\n * the jquery object cache.\r\n * @type {{$blank: (any), $loading: (any), $startBtn: (any), $selectors: (any), updater: (())}}\r\n */\r\nconst cache = {\r\n    $blank: $('#blk-15'),\r\n    $loading: $('#loading'),\r\n    $startBtn: $('#start'),\r\n    $selectors: $('.img-groups'),\r\n    updater: update.bind(model)\r\n};\r\n\r\n/****************************************************************\r\n View-Callbacks\r\n 1. watch the variable of the model.\r\n 2. call the callback when the variable change.\r\n 3. then update the view by operating on the DOM node.\r\n ****************************************************************/\r\n\r\n/**\r\n * change the image.\r\n */\r\nmodel.$watch('imgUrl', function (newValue, oldValue) {\r\n    const img = new Image();\r\n    const ctxArray = this.blockMap.map(object => object.element.getContext('2d'));\r\n    img.src = newValue;\r\n    img.onload = () => {\r\n        drawCanvas(ctxArray, img);\r\n    };\r\n});\r\n\r\n/**\r\n * use the default image: KongFu Panda.\r\n * @type {string}\r\n */\r\nmodel.imgUrl = './img/panda.jpg';\r\n\r\n/**\r\n * be reactive to the state of the game.\r\n */\r\nmodel.$watch('gameState', function (newValue, oldValue) {\r\n    /**\r\n     * When the game starts...\r\n     */\r\n    if (Type.Pending === newValue) {\r\n        handleBeginningGame(this);\r\n    }\r\n    /**\r\n     * When the game over or give up.\r\n     */\r\n    if (Type.Pending === oldValue) {\r\n        handleEndingGame(this);\r\n    }\r\n});\r\n\r\n/**\r\n * normalize data & style.\r\n * @param model\r\n */\r\nfunction handleBeginningGame(model) {\r\n    normalizeInitialGameData(model);\r\n    cache.$selectors.addClass('no-see');\r\n    beginCount(model);\r\n}\r\n\r\n/**\r\n * set initial data of the game.\r\n * @param model\r\n */\r\nfunction normalizeInitialGameData(model) {\r\n    Object.assign(model, {\r\n        isRunning: false,\r\n        startButton: 'Give Up : (',\r\n        time: 0,\r\n        count: 0,\r\n        isWinner: false,\r\n        message: 'Game Starting...'\r\n    });\r\n}\r\n\r\n/**\r\n * counting the time every 1s.\r\n * @param model\r\n */\r\nfunction beginCount(model) {\r\n    const timeUid = setInterval(() => {\r\n        if (model.gameState === Type.Pending) {\r\n            model.time++;\r\n        } else\r\n            clearInterval(timeUid);\r\n    }, 1000);\r\n}\r\n\r\n/**\r\n * set data & style when game ending.\r\n * @param model\r\n */\r\nfunction handleEndingGame(model) {\r\n    if (model.isWinner) {\r\n        cache.$selectors.removeClass('no-see');\r\n    }\r\n    Object.assign(model, {\r\n        message: `${model.isWinner ? 'Congratulations!' : 'Try your best.'} Time:${model.time}, Count:${model.count}`,\r\n        startButton: model.isWinner ? 'Start!' : 'Getting Solution...',\r\n        time: 0,\r\n        count: 0\r\n    });\r\n}\r\n\r\n/**\r\n * watch the block moving. update the style.\r\n */\r\nmodel.$watch('isRunning', function (isRunning) {\r\n    if (isRunning) {\r\n        cache.$startBtn.addClass('disable-click');\r\n        cache.$selectors.addClass('no-see');\r\n    } else {\r\n        cache.$startBtn.removeClass('disable-click');\r\n    }\r\n});\r\n\r\n/****************************************************************\r\n Event Handler\r\n ****************************************************************/\r\n\r\n/**\r\n * Move the block when it was clicked\r\n * if it is near the blank Block.\r\n */\r\n$('.playground').click(e => {\r\n    e.preventDefault();\r\n    const getIndex = getterFactory(model.blockMap, selectElement);\r\n    const nextDescriptor = move(getIndex(e.target), getIndex(cache.$blank[0]), model.blockMap);\r\n    if (!nextDescriptor) return;\r\n    update.call(model, nextDescriptor.state);\r\n    handleMovedMap(model);\r\n});\r\n\r\n/**\r\n * set data & style after moving a block.\r\n * @param model\r\n */\r\nfunction handleMovedMap(model) {\r\n    if (isSolved(model.blockMap)) {\r\n        model.isWinner = true;\r\n        model.gameState = Type.Unstarted;\r\n    }\r\n    if (model.gameState === Type.Pending) {\r\n        model.count++;\r\n    }\r\n}\r\n\r\n\r\ncache.$startBtn.click(e => {\r\n    e.preventDefault();\r\n    /**\r\n     * refuse when the animate running.\r\n     */\r\n    if (model.isRunning) return;\r\n    if (model.gameState === Type.Unstarted) {\r\n        startGame(model);\r\n    } else if (model.gameState === Type.Pending) {\r\n        stopGame(model);\r\n    }\r\n\r\n});\r\n\r\n/**\r\n * turn to starting.\r\n * @param model {model}\r\n */\r\nfunction startGame(model) {\r\n    /**\r\n     * Mix the puzzle.\r\n     * @type {string}\r\n     */\r\n    model.startButton = 'Mixing...';\r\n    mix(model, cache.$blank[0], cache.updater, selectElement)\r\n        .then(() => {\r\n            model.gameState = Type.Pending;\r\n        });\r\n}\r\n\r\n/**\r\n * turn to stopping game.\r\n * @param model {model}\r\n */\r\nfunction stopGame(model) {\r\n    model.gameState = Type.Unstarted;\r\n    handleStoppingGame(model);\r\n    /**\r\n     * Use Algorithm to solve the problem.\r\n     */\r\n    asyncRunningAlgorithm(AStar, generateInitialNode(model, selectElement))\r\n        .then(resultNode => displaySolution(model, resultNode))\r\n        .then(() => {\r\n            handleEndingDisplaying(model);\r\n        });\r\n}\r\n\r\n/**\r\n * generate a initial parent Node for the algorithm.\r\n * @param model\r\n * @param selector\r\n * @return {Node}\r\n */\r\nfunction generateInitialNode(model, selector) {\r\n    const getIndex = getterFactory(model.blockMap, selector);\r\n    return new Node(model.blockMap, getIndex(cache.$blank[0]), null);\r\n}\r\n\r\n/**\r\n * set data & style when stopping the game.\r\n * @param model\r\n */\r\nfunction handleStoppingGame(model) {\r\n    cache.$loading.removeClass('disable-see');\r\n}\r\n\r\n/**\r\n * running the algorithm after the UI handler.\r\n * @param algorithm\r\n * @param args\r\n * @return {Promise}\r\n */\r\nfunction asyncRunningAlgorithm(algorithm, args) {\r\n    return new Promise((resolve, reject) => {\r\n        setTimeout(() => {\r\n            resolve(algorithm(args));\r\n        }, 20);\r\n    });\r\n}\r\n\r\n/**\r\n * collect the solution path and display it.\r\n * @param model\r\n * @param resultNode\r\n * @return {Promise}\r\n */\r\nfunction displaySolution(model, resultNode) {\r\n    const path = collectSolutionPath(resultNode);\r\n    handleResolvingDisplaying(model);\r\n    return new Promise((resolve, reject) => {\r\n        showSolutionAsync(path, cache.updater, resolve);\r\n    });\r\n}\r\n\r\n/**\r\n * convert the result node into a solution path.\r\n * @param resultNode {Node}\r\n * @return {Array<Node>}\r\n */\r\nfunction collectSolutionPath(resultNode) {\r\n    const path = [];\r\n    let target = resultNode;\r\n    while (target.parentNode) {\r\n        path.push(target);\r\n        target = target.parentNode;\r\n    }\r\n    return path;\r\n}\r\n\r\n/**\r\n * set Data & style while displaying the solution.\r\n * @param model\r\n */\r\nfunction handleResolvingDisplaying(model) {\r\n    cache.$loading.addClass('disable-see');\r\n    Object.assign(model, {\r\n        startButton: 'Recovering...',\r\n        isRunning: true\r\n    });\r\n}\r\n\r\n/**\r\n * set Data & style after displaying the solution.\r\n * @param model\r\n */\r\nfunction handleEndingDisplaying(model) {\r\n    cache.$selectors.removeClass('no-see');\r\n    Object.assign(model, {\r\n        startButton: 'Try Again! : )',\r\n        isRunning: false\r\n    });\r\n}\r\n\r\n/**\r\n * the image switcher.\r\n */\r\ncache.$selectors\r\n    .click(e => {\r\n        e.preventDefault();\r\n        if (model.gameState === Type.Unstarted) {\r\n            const currentImg = Img.find(imageInfo => imageInfo.name === e.target.id);\r\n            if (currentImg)\r\n                model.imgUrl = currentImg.url.img;\r\n        }\r\n    });\r\n\r\nconsole.log(model);\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","/**\r\n * myModel is a very very very tiny MVVM lib.\r\n *\r\n * @Updated 2016/10/14 Zhiyu He\r\n */\r\n\r\n'use strict';\r\n\r\nimport {observe} from './observer/index.js';\r\nimport {compile} from './compiler.js';\r\nimport Watcher from './observer/watcher.js';\r\n\r\nexport default class Model {\r\n    constructor(options = {}) {\r\n        this._data = options.data;\r\n        this._watchers = [];\r\n        this._target = options.target ? document.querySelector(options.target) : undefined;\r\n        Object.keys(this._data).forEach(key => {\r\n            proxy(this, key);\r\n        });\r\n        observe(this._data);\r\n        if (this._target)\r\n            compile(this._target, this);\r\n    }\r\n\r\n    /**\r\n     * when the vale of the expression changes,\r\n     * the callback would be called\r\n     * callback example:\r\n     *        (newValue, oldValue) => *, this <===> model\r\n     * @param expOrFn {string|function}\r\n     * @param callback {function}\r\n     */\r\n    $watch(expOrFn, callback) {\r\n        const watcher = new Watcher(this, expOrFn, callback);\r\n        this._watchers.push(watcher);\r\n    }\r\n}\r\n\r\n/**\r\n * proxy the properties\r\n * example:\r\n *      model.key <===> model._data.key\r\n * @param model {Model}\r\n * @param key {String}\r\n */\r\nfunction proxy(model, key) {\r\n    Object.defineProperty(model, key, {\r\n        configurable: true,\r\n        enumerable: true,\r\n        get: () => model._data[key],\r\n        set: newVal => {\r\n            model._data[key] = newVal;\r\n        }\r\n    });\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/myModel/index.js\n **/","'use strict';\r\n\r\nimport Dependency from './dependency.js';\r\nimport {arrayMethods} from './array.js';\r\n\r\nclass Observer {\r\n    constructor(value) {\r\n        this.value = value;\r\n        this.dep = new Dependency();\r\n        Object.defineProperty(value, '__ob__', {\r\n            value: this,\r\n            enumerable: false,\r\n            writable: true,\r\n            configurable: true\r\n        });\r\n\r\n        if (Array.isArray(value)) {\r\n            augment(value, arrayMethods);\r\n            this.observeArray(value);\r\n        } else\r\n            this.walk(value);\r\n    }\r\n\r\n    /**\r\n     * travel all the props of the object, and set reactive props.\r\n     * @param obj {object}\r\n     */\r\n    walk(obj) {\r\n        Object.keys(obj).forEach(key => {\r\n            defineReactive(obj, key, obj[key]);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Observe a list of Array items.\r\n     * @param items {Array}\r\n     */\r\n    observeArray(items) {\r\n        items.forEach(value => {\r\n            observe(value);\r\n        });\r\n    }\r\n}\r\n\r\n/**\r\n * observe a property and set a observer if the property doesn't own one;\r\n * @param value {object} the property that needs nextBlankTargetIndex be observed\r\n * @return {Observer|undefined} if it is a string or number, returns undefined\r\n */\r\nexport function observe(value) {\r\n    if (!value || typeof value !== 'object') {\r\n        return;\r\n    }\r\n    let ob;\r\n    if (value.hasOwnProperty('__ob__') && value['__ob__'] instanceof Observer) {\r\n        ob = value['__ob__'];\r\n    } else if (Object.isExtensible(value)) {\r\n        ob = new Observer(value);\r\n    }\r\n    return ob;\r\n}\r\n\r\n/**\r\n * Make the prop reactified\r\n * @param obj {Object}\r\n * @param key {String}\r\n * @param val {*}\r\n * @return {*}\r\n */\r\nfunction defineReactive(obj, key, val) {\r\n    const dep = new Dependency();\r\n\r\n    let childObserver = observe(val);\r\n\r\n    Object.defineProperty(obj, key, {\r\n        enumerable: true,\r\n        configurable: true,\r\n        get: () => {\r\n            if (Dependency.target) {\r\n                dep.depend();\r\n                if (childObserver) {\r\n                    childObserver.dep.depend();\r\n                }\r\n                if (Array.isArray(val)) {\r\n                    val.forEach(item => {\r\n                        item && item['__ob__'] && item['__ob__'].dep.depend();\r\n                    });\r\n                }\r\n            }\r\n            return val;\r\n        },\r\n        set: (newVal) => {\r\n            if (newVal === val)\r\n                return;\r\n            val = newVal;\r\n            dep.notify();\r\n        }\r\n    });\r\n}\r\n\r\nfunction augment(target, src) {\r\n    target.__proto__ = src;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/myModel/observer/index.js\n **/","'use strict';\r\n\r\nlet uid = 0;\r\n\r\n/**\r\n * 订阅者模式\r\n */\r\nexport default class Dependency {\r\n    constructor() {\r\n        this.id = uid++;\r\n        this.subs = [];\r\n    }\r\n\r\n    addSub(sub) {\r\n        this.subs.push(sub);\r\n    }\r\n\r\n    /**\r\n     * 通知依赖\r\n     * 这样Watcher就可以知道所维护的值需要依赖于哪些Model里面的其他值\r\n     */\r\n    depend() {\r\n        if (Dependency.target) {\r\n            Dependency.target.addDependency(this);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 广播更新\r\n     */\r\n    notify() {\r\n        const subs = this.subs.slice();\r\n        subs.forEach(sub => {\r\n            sub.update();\r\n        });\r\n    }\r\n}\r\n\r\n/**\r\n * 该依赖的全局监视者\r\n */\r\nDependency.target = null;\r\n\r\nconst targetStack = [];\r\n\r\n/**\r\n * 全局每次更新只能有一个监视者更新, 使用栈维护\r\n * @param _target {Watcher}\r\n */\r\nexport function pushTarget(_target) {\r\n    if (Dependency.target)\r\n        targetStack.push(Dependency.target);\r\n    Dependency.target = _target;\r\n}\r\n\r\nexport function popTarget() {\r\n    Dependency.target = targetStack.pop()\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/myModel/observer/dependency.js\n **/","'use strict';\r\n\r\n/**\r\n * []\r\n * @type {Array}\r\n */\r\nexport const arrayMethods = Object.create(Array.prototype);\r\n\r\n[\r\n    'push',\r\n    'dequeue',\r\n    'shift',\r\n    'unshift',\r\n    'sort',\r\n    'reverse',\r\n    'splice'\r\n].forEach(methodName => {\r\n    const original = Array.prototype[methodName];\r\n    Object.defineProperty(arrayMethods, methodName, {\r\n        enumerable: false,\r\n        writable: true,\r\n        configurable: true,\r\n        value: function () {\r\n            const args = Array.from(arguments);\r\n            const result = original.apply(this, args);\r\n            const observer = this['__ob__'];\r\n            observeNewItems(methodName, args, observer);\r\n            observer.dep.notify();\r\n            return result;\r\n        }\r\n    })\r\n});\r\n\r\nfunction observeNewItems(methodName, args, observer) {\r\n    let inserted = undefined;\r\n    switch (methodName) {\r\n        case 'push':\r\n            inserted = args;\r\n            break;\r\n        case 'unshift':\r\n            inserted = args;\r\n            break;\r\n        case 'splice':\r\n            inserted = args.slice(2);\r\n            break;\r\n    }\r\n    if (inserted) {\r\n        observer.observeArray(inserted);\r\n    }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/myModel/observer/array.js\n **/","'use strict';\r\n\r\nimport Watcher, {getGetter} from './observer/watcher.js';\r\n\r\nexport function compile(element, model) {\r\n    const nodeList = element.childNodes;\r\n    for (let node of nodeList) {\r\n        if (node.nodeType === 3) {\r\n            compileTextNode(node, model);\r\n        } else if (node.nodeType === 1) {\r\n            compile(node, model);\r\n        }\r\n    }\r\n}\r\n\r\nconst tagRE = /\\{\\{((?:.|\\n)+?)\\}\\}/g;\r\n\r\nfunction compileTextNode(textNode, model) {\r\n    let tokens = parseText(textNode.textContent);\r\n    if (!tokens)\r\n        return;\r\n    let frag = document.createDocumentFragment();\r\n    tokens.forEach(obj => {\r\n        let ele;\r\n        if (obj.expression) {\r\n            ele = document.createTextNode(getGetter(obj.expression)(model));\r\n            model._watchers.push(\r\n                new Watcher(model, obj.expression, (newValue, oldValue) => {\r\n                    ele.textContent = newValue;\r\n                })\r\n            );\r\n        } else {\r\n            ele = document.createTextNode(obj.value);\r\n        }\r\n        frag.appendChild(ele);\r\n    });\r\n\r\n    const parentNode = textNode.parentNode;\r\n    parentNode.replaceChild(frag, textNode);\r\n}\r\n\r\nfunction parseText(text) {\r\n    if (!tagRE.test(text))\r\n        return;\r\n\r\n    const tokens = [];\r\n    let lastIndex = tagRE.lastIndex = 0;\r\n    let match, index;\r\n    while ((match = tagRE.exec(text))) {\r\n        index = match.index;\r\n        // push text token\r\n        if (index > lastIndex) {\r\n            tokens.push({\r\n                value: text.slice(lastIndex, index)\r\n            });\r\n        }\r\n        // tag token\r\n        const exp = match[1];\r\n        tokens.push({\r\n            expression: exp,\r\n            value: exp\r\n        });\r\n        lastIndex = index + match[0].length;\r\n    }\r\n    if (lastIndex < text.length) {\r\n        tokens.push({\r\n            value: text.slice(lastIndex)\r\n        });\r\n    }\r\n    return tokens;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/myModel/compiler.js\n **/","'use strict';\r\n\r\nimport {popTarget, pushTarget} from './dependency.js';\r\n\r\n/**\r\n * Watcher will call the callback when the value of the expression changes!\r\n */\r\nexport default class Watcher {\r\n    /**\r\n     * @constructor\r\n     * @param model {model}\r\n     * @param expOrFn {string|function}\r\n     * @param callback {function}\r\n     */\r\n    constructor(model, expOrFn, callback) {\r\n        this.callback = callback;\r\n        this.model = model;\r\n\r\n        this.newDepIds = new Set();\r\n        this.newDeps = [];\r\n        this._getter = getGetter(expOrFn);\r\n        this.value = this.get();\r\n    }\r\n\r\n    /**\r\n     * get the value of the expression and collects the dep!\r\n     * @return {*}\r\n     */\r\n    get() {\r\n        pushTarget(this);\r\n        const value = this._getter.call(this.model, this.model); // collects the deps!\r\n        popTarget();\r\n        return value;\r\n    }\r\n\r\n    /**\r\n     * add dependency for the watcher\r\n     * @param dep {Dependency}\r\n     */\r\n    addDependency(dep) {\r\n        const id = dep.id;\r\n        if (!this.newDepIds.has(id)) {\r\n            this.newDepIds.add(id);\r\n            this.newDeps.push(dep);\r\n            dep.addSub(this)\r\n        }\r\n    }\r\n\r\n    update() {\r\n        this.run();\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * run the callback to update the value\r\n     */\r\n    run() {\r\n        const value = this.get();\r\n        if (value !== this.value || typeof value === 'object') {\r\n            const oldValue = this.value;\r\n            this.value = value;\r\n            this.callback.call(this.model, value, oldValue);\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * get the getter function of the expression after parsing.\r\n * @param expOrFn {string|Function}\r\n * @return {function}\r\n */\r\nexport function getGetter(expOrFn) {\r\n    let getter = function () {\r\n        // do nothing..\r\n    };\r\n    if (typeof expOrFn === 'function') {\r\n        getter = expOrFn;\r\n    } else if (typeof expOrFn === 'string') {\r\n        getter = new Function('model', `return model.${expOrFn};`);\r\n    } else {\r\n        console.warn(`${expOrFn} fail to parse!!`);\r\n    }\r\n    return getter;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/myModel/observer/watcher.js\n **/","module.exports = jQuery;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"jQuery\"\n ** module id = 7\n ** module chunks = 0\n **/","'use strict';\r\n\r\nimport {getRandomInt} from './util.js';\r\nimport {Node} from './data-structure.js';\r\nimport _ from 'lodash';\r\n\r\n/***********************************************************\r\n Public Helper Function\r\n ***********************************************************/\r\n\r\n/**\r\n *\r\n * @param targetIndex {number}\r\n * @param blankTargetIndex {number}\r\n * @param map {{element:Element,correctIndex:number}[] | number[]}\r\n * @return {Node}\r\n */\r\nexport function move(targetIndex, blankTargetIndex, map) {\r\n    if (getNeighboursIndex(targetIndex)\r\n            .some(neighboursIndex => neighboursIndex === blankTargetIndex)) {\r\n        const nextMap = map.slice();\r\n        [\r\n            nextMap[targetIndex],\r\n            nextMap[blankTargetIndex]\r\n        ] = [\r\n            map[blankTargetIndex],\r\n            map[targetIndex]\r\n        ];\r\n        return {\r\n            state: nextMap,\r\n            blankTargetIndex: targetIndex,\r\n            parentState: map\r\n        }\r\n    }\r\n}\r\n\r\nexport function search(targetIndex, currentNode) {\r\n    const subNode = move(targetIndex, currentNode.blankTargetIndex, currentNode.state);\r\n    return new Node(subNode.state, subNode.blankTargetIndex, currentNode);\r\n}\r\n\r\n/**\r\n * baffle the blocks.\r\n * @param times {number} the times.\r\n * @param speed {number} the speed of the block when moving. (ms)\r\n * @param resolve {function} promise resolve\r\n * @return {function}\r\n */\r\nexport function randomlySelectAndMoveAsync(times, speed, resolve) {\r\n    times--;\r\n    /**\r\n     * randomly move the blank block\r\n     * @param preTargetIndex {number} the index of element that will be ignore in the next randomly move.\r\n     * @param blankTargetIndex {number} the blank object in the map.\r\n     * @param map {Array} the state.\r\n     * @param updater {function} update the view if called.\r\n     */\r\n    function randomlyMove(preTargetIndex, blankTargetIndex, map, updater) {\r\n        const targetIndex = _.sample(getNeighboursIndex(blankTargetIndex).filter(index => index !== preTargetIndex));\r\n        const nextDescriptor = move(targetIndex, blankTargetIndex, map);\r\n        updater(nextDescriptor.state);\r\n\r\n        if (times) {\r\n            setTimeout(() => {\r\n                times--;\r\n                randomlyMove(blankTargetIndex, nextDescriptor.blankTargetIndex, nextDescriptor.state, updater);\r\n            }, speed);\r\n        } else {\r\n            resolve(nextDescriptor);\r\n        }\r\n    }\r\n\r\n    return randomlyMove;\r\n}\r\n\r\n/**\r\n * Update the view according nextBlankTargetIndex the descriptor.\r\n * @param nextState\r\n */\r\nexport function update(nextState) {\r\n    const patches = diff(nextState, this.blockMap);\r\n    render(patches, nextState);\r\n    this.blockMap = nextState;\r\n}\r\n\r\n/**\r\n * get the neighbours index.\r\n * @param targetIndex\r\n * @return {Array}\r\n */\r\nexport function getNeighboursIndex(targetIndex) {\r\n    return [\r\n        {X: 0, Y: -1}, // up\r\n        {X: 1, Y: 0}, // right\r\n        {X: 0, Y: 1}, // down\r\n        {X: -1, Y: 0} // left\r\n    ].map(offset => ({\r\n        X: targetIndex % 4 + offset.X,\r\n        Y: Math.floor(targetIndex / 4) + offset.Y\r\n    })).filter(position => (\r\n        position.X >= 0 && position.X < 4 &&\r\n        position.Y >= 0 && position.Y < 4\r\n    )).map(position => position.Y * 4 + position.X);\r\n}\r\n\r\n/**\r\n * make a index getter\r\n * @param map\r\n * @param selector\r\n * @return {function(*): number}\r\n */\r\nexport function getterFactory(map, selector) {\r\n    return target => map.map(selector).findIndex(object => object === target);\r\n}\r\n\r\n/**\r\n * showing the solution for the solution path.\r\n * @param path {Array}\r\n * @param updater {Function}\r\n * @param resolve\r\n */\r\nexport function showSolutionAsync(path, updater, resolve) {\r\n    if (path.length) {\r\n        updater(path.pop().state);\r\n        setTimeout(() => {\r\n            showSolutionAsync(path, updater, resolve);\r\n        }, 120);\r\n    } else {\r\n        resolve(path);\r\n    }\r\n}\r\n\r\n/**\r\n * draw the picture\r\n * @param canvasContextArray {Array}\r\n * @param image {Image}\r\n */\r\nexport function drawCanvas(canvasContextArray, image) {\r\n    canvasContextArray.forEach((ctx, index) => {\r\n        ctx.drawImage(image,\r\n            (index % 4) * (image.width / 4), Math.floor(index / 4) * (image.height / 4),\r\n            (image.width / 4), (image.height / 4),\r\n            0, 0, 100, 100\r\n        );\r\n    });\r\n    const last = canvasContextArray[canvasContextArray.length - 1];\r\n    last.fillStyle = 'rgba(120, 120, 120, 0.7)';\r\n    last.fillRect(0, 0, 100, 100);\r\n}\r\n\r\nexport function mix(model, blankElement, updater, selector) {\r\n    const getElementIndex = getterFactory(model.blockMap, selector);\r\n    const targetIndex = _.flow(getElementIndex, getNeighboursIndex, _.sample)(blankElement);\r\n    return new Promise((resolve, reject) => {\r\n        model.isRunning = true;\r\n        randomlySelectAndMoveAsync(model.stepNumber, 120, resolve)(\r\n            targetIndex, getElementIndex(blankElement), model.blockMap, updater\r\n        );\r\n    });\r\n}\r\n\r\n/**\r\n * judge if it is Solved.\r\n * @param blockMap\r\n * @return {boolean|*}\r\n */\r\nexport function isSolved(blockMap) {\r\n    return blockMap.every((object, index) => object.correctIndex === index);\r\n}\r\n\r\n/***********************************************************\r\n Private Helper Function\r\n ***********************************************************/\r\n\r\n/**\r\n * Show the difference between the new map and the old map.\r\n * @param newMap {Array}\r\n * @param oldMap {Array}\r\n * @return {Array} tokens.\r\n */\r\nfunction diff(newMap, oldMap) {\r\n    const tokens = [];\r\n    newMap.forEach((newObject, index) => {\r\n        const oldObject = oldMap[index];\r\n        if (newObject.correctIndex !== oldObject.correctIndex) {\r\n            tokens.push({\r\n                before: oldObject.correctIndex,\r\n                after: newObject.correctIndex,\r\n                index\r\n            });\r\n        }\r\n    });\r\n    return tokens;\r\n}\r\n\r\n/**\r\n * render the data to the view\r\n * @param patches {Array}\r\n * @param map\r\n */\r\nfunction render(patches, map) {\r\n    patches.forEach(patch => {\r\n        const target = map[patch.index].element;\r\n        target.className = target.className.replace(/order-\\d*/, `order-${patch.index}`);\r\n    });\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/helper.js\n **/","'use strict';\r\n\r\nexport function getRandomInt(min, max) {\r\n    return Math.floor(Math.random() * (max - min + 1) + min);\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/util.js\n **/","'use strict';\r\n\r\nimport {selectNumber} from './selector.js';\r\n\r\nexport class Node {\r\n    /**\r\n     *\r\n     * @param state {Array}\r\n     * @param blankTargetIndex {Number}\r\n     * @param parentNode {Node}\r\n     */\r\n    constructor(state, blankTargetIndex, parentNode) {\r\n        Object.assign(this, {\r\n            state,\r\n            blankTargetIndex,\r\n            parentNode,\r\n            depth: parentNode !== null ? parentNode.depth + 1 : 0,\r\n        });\r\n\r\n        this.h = computeH(this.state.map(selectNumber).map(mapIndexToDistanceObject).reduce(objectReducer));\r\n    }\r\n}\r\n\r\n/**\r\n * compute the h value of the current state.\r\n * @param distanceObject\r\n * @return {number}\r\n */\r\nfunction computeH(distanceObject) {\r\n    return (distanceObject.manhatten * 2 + distanceObject.geometric) * 2;\r\n}\r\n\r\n/**\r\n * map the number & index to the distance object.\r\n * @param number\r\n * @param index\r\n * @return {{manhatten: number, geometric: number}}\r\n */\r\nfunction mapIndexToDistanceObject(number, index) {\r\n    return {\r\n        manhatten: getManhattenDistance(number, index),\r\n        geometric: getGeometricDistance(number, index)\r\n    };\r\n}\r\n\r\n/**\r\n * get manhatten distance\r\n * @param from\r\n * @param to\r\n * @return {number}\r\n */\r\nfunction getManhattenDistance(from, to) {\r\n    return Math.abs(from % 4 - to % 4) + Math.abs(from >> 2 - to >> 2);\r\n}\r\n\r\n/**\r\n * get geometric distance\r\n * @param from\r\n * @param to\r\n * @return {number}\r\n */\r\nfunction getGeometricDistance(from, to) {\r\n    return Math.sqrt(Math.pow((from % 4 - to % 4), 2) + Math.pow(from >> 2 - to >> 2, 2));\r\n}\r\n\r\n/**\r\n * reduce the object\r\n * @param leftObject\r\n * @param rightObject\r\n * @return {Object}\r\n */\r\nfunction objectReducer(leftObject, rightObject) {\r\n    leftObject.manhatten += rightObject.manhatten;\r\n    leftObject.geometric += rightObject.geometric;\r\n    return leftObject;\r\n}\r\n\r\nexport class PriorityQueue extends Array {\r\n    constructor(compare) {\r\n        super();\r\n        this.push(null);\r\n        this.compare = compare;\r\n\r\n        /**\r\n         * push\r\n         * @param item {*}\r\n         */\r\n        this.enqueue = function (item) {\r\n            this.push(item);\r\n\r\n            let currentIndex = this.length - 1;\r\n            while (currentIndex > 1) {\r\n                const parentIndex = currentIndex >> 1;\r\n                if (this.compare(this[currentIndex], this[parentIndex]) < 0) {\r\n                    swap(this, parentIndex, currentIndex);\r\n                } else {\r\n                    break;\r\n                }\r\n                currentIndex = parentIndex;\r\n            }\r\n        };\r\n\r\n        /**\r\n         * Pop\r\n         * @return {*}\r\n         */\r\n        this.dequeue = function () {\r\n            const TopItem = this[1];\r\n            this[1] = this.pop();\r\n            if (this.length === 2) {\r\n                this.pop();\r\n            }\r\n\r\n            const Q = [1];\r\n            while (Q.length) {\r\n                const parentIndex = Q.shift();\r\n                let minChildIndex = parentIndex;\r\n\r\n\r\n                const childIndexArray = [parentIndex << 1, (parentIndex << 1) | 1];\r\n                childIndexArray.filter(childIndex => {\r\n                    return childIndex < this.length;\r\n                }).forEach(childIndex => {\r\n                    if (this.compare(this[childIndex], this[minChildIndex]) < 0) {\r\n                        minChildIndex = childIndex;\r\n                    }\r\n                });\r\n\r\n                if (parentIndex !== minChildIndex) {\r\n                    swap(this, parentIndex, minChildIndex);\r\n                    Q.push(minChildIndex);\r\n                }\r\n            }\r\n            return TopItem;\r\n        };\r\n\r\n        /**\r\n         * is empty?\r\n         * @return {boolean}\r\n         */\r\n        this.empty = function () {\r\n            return this.length <= 1;\r\n        }\r\n    }\r\n}\r\n\r\nfunction swap(array, leftIndex, rightIndex) {\r\n    const temp = array[leftIndex];\r\n    array[leftIndex] = array[rightIndex];\r\n    array[rightIndex] = temp;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/data-structure.js\n **/","'use strict';\r\n\r\nexport const selectElement = o => o.element;\r\nexport const selectNumber = o => o.correctIndex;\r\nexport const selectOriginal = o => o;\n\n\n/** WEBPACK FOOTER **\n ** ./src/selector.js\n **/","module.exports = _;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"_\"\n ** module id = 12\n ** module chunks = 0\n **/","'use strict';\r\n\r\n/**\r\n * The State constant of the game.\r\n * @type {{Unstarted: string, Pending: string, Win: string, Lose: string, Over: string}}\r\n */\r\nexport const Type = {\r\n    Unstarted: 'UNSTARTED',\r\n    Pending: 'PENDING',\r\n    Win: 'WIN',\r\n    Lose: 'LOSE',\r\n    Over: 'OVER',\r\n};\r\n\r\nexport const Img = [\r\n    {\r\n        name: 'panda',\r\n        url: {\r\n            img: './img/panda.jpg',\r\n            bg: './img/bg_gfpanda.jpg'\r\n        }\r\n    },\r\n    {\r\n        name: 'overwatch',\r\n        url: {\r\n            img: './img/img_overwatch.jpg',\r\n            bg: './img/bg_overwatch.jpg'\r\n        }\r\n    },\r\n    {\r\n        name: 'zootopia',\r\n        url: {\r\n            img: './img/img_zootopia.jpeg',\r\n            bg: './img/bg_zootopia.jpeg'\r\n        }\r\n    },\r\n    {\r\n        name: 'baymax',\r\n        url: {\r\n            img: './img/img_baymax.jpg',\r\n            bg: './img/bg_baymax.jpg'\r\n        }\r\n    }\r\n];\n\n\n/** WEBPACK FOOTER **\n ** ./src/type.js\n **/","'use strict';\r\n\r\nimport {PriorityQueue} from './data-structure.js';\r\nimport {selectNumber} from './selector.js';\r\nimport {search, getNeighboursIndex, isSolved} from './helper.js';\r\n\r\n/**\r\n * A* Algorithm\r\n * based on BFS with a function f to give an standard to choice\r\n * which node is the best when getting next state.\r\n * @param rootNode {Node} the root node. (Current State)\r\n * @return {Node|undefined} the last node\r\n */\r\nexport function AStar(rootNode) {\r\n        const PQ = new PriorityQueue(compare);\r\n        const S = new Set();\r\n        PQ.enqueue(rootNode);\r\n        console.time('AStar算法用时');\r\n\r\n        while (!PQ.empty()) {\r\n            const currentNode = PQ.dequeue();\r\n            if (isSolved(currentNode.state)) {\r\n                console.timeEnd('AStar算法用时');\r\n                return currentNode;\r\n            }\r\n\r\n            getNeighboursIndex(currentNode.blankTargetIndex)\r\n                .forEach(targetIndex => tryInsertToSet(search(targetIndex, currentNode), S, PQ));\r\n        }\r\n}\r\n\r\n/**\r\n * general compare function.\r\n * @param left\r\n * @param right\r\n * @return {number}\r\n */\r\nfunction compare(left, right) {\r\n    return left.h - right.h + left.depth - right.depth;\r\n}\r\n\r\n/**\r\n * check the signature and insert to the set.\r\n * @param nextNode\r\n * @param set\r\n * @param priorityQueue\r\n */\r\nfunction tryInsertToSet(nextNode, set, priorityQueue) {\r\n    const signature = nextNode.state.map(selectNumber).toString();\r\n    if (!set.has(signature)) {\r\n        priorityQueue.enqueue(nextNode);\r\n        set.add(signature);\r\n    }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/algorithm.js\n **/"],"sourceRoot":""}